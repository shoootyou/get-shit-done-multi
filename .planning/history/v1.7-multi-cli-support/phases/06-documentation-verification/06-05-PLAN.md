---
phase: 06-documentation-verification
plan: 05
type: execute
wave: 2
depends_on: [06-01]
files_modified:
  - bin/doc-generator/extract-capabilities.js
  - docs/capability-matrix.html
  - docs/assets/matrix.js
  - docs/assets/matrix.css
autonomous: true

must_haves:
  truths:
    - "Users can open capability-matrix.html in browser and see interactive table"
    - "Users can filter matrix by CLI (show only Claude/Copilot/Codex features)"
    - "Users can filter matrix by category (agents/commands/state)"
    - "Matrix shows support level icons (✓/⚠/✗) for quick scanning"
    - "Matrix includes notes explaining partial support and limitations"
  artifacts:
    - path: "bin/doc-generator/extract-capabilities.js"
      provides: "Extract capability data from code into JSON"
      min_lines: 100
      exports: ["extractCapabilities", "aggregateByFeature"]
    - path: "docs/capability-matrix.html"
      provides: "Static HTML page with embedded matrix UI"
      contains: "<div id=\"matrix-container\"></div>"
    - path: "docs/assets/matrix.js"
      provides: "Vanilla JS matrix functionality (filter, sort, render)"
      min_lines: 120
      contains: "class CapabilityMatrix"
    - path: "docs/assets/matrix.css"
      provides: "Matrix styling with status colors"
      contains: ".status-full"
  key_links:
    - from: "docs/capability-matrix.html"
      to: "docs/capability-data.json"
      via: "fetch() to load data"
      pattern: "fetch.*capability-data\\.json"
    - from: "docs/capability-matrix.html"
      to: "docs/assets/matrix.js"
      via: "<script src> tag"
      pattern: "<script.*matrix\\.js"
    - from: "docs/assets/matrix.js"
      to: "CapabilityMatrix class"
      via: "new CapabilityMatrix()"
      pattern: "new CapabilityMatrix"
---

<objective>
Create interactive HTML capability matrix with vanilla JavaScript for filtering and exploring feature availability across CLIs without any framework dependencies.

Purpose: Provide users with interactive, visual way to explore which features work in which CLIs. Satisfies DOCS-07 requirement and Phase 6 success criteria #5.
Output: Self-contained HTML page with embedded vanilla JS for capability exploration.
</objective>

<execution_context>
@.github/skills/get-shit-done/get-shit-done/workflows/execute-plan.md
@.github/skills/get-shit-done/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-documentation-verification/06-RESEARCH.md

# Generated capability data to consume
@docs/capability-data.json

# Existing capability infrastructure
@bin/lib/orchestration/capability-matrix.js
</context>

<tasks>

<task type="auto">
  <name>Create capability data extractor</name>
  <files>bin/doc-generator/extract-capabilities.js</files>
  <action>
Create comprehensive capability extractor that generates capability-data.json with all features.

**Extract from:**
1. bin/lib/orchestration/capability-matrix.js - AGENT_CAPABILITIES object
2. bin/lib/command-system/registry.js - Command availability
3. lib-ghcc/state-*.js - State management features

**Output format:**
```json
[
  {
    "feature": "gsd-executor agent",
    "category": "agents",
    "description": "Executes phase plans with atomic commits",
    "claude": "full",
    "copilot": "full",
    "codex": "full",
    "notes": {
      "claude": "",
      "copilot": "Requires custom agent definition in .github/agents/",
      "codex": "Requires CLI installation and skill registration"
    }
  },
  {
    "feature": "/gsd:new-project command",
    "category": "commands",
    "description": "Initialize new GSD project",
    "claude": "full",
    "copilot": "full",
    "codex": "full",
    "notes": {
      "claude": "Native skill support",
      "copilot": "Skill-based via .github/skills/",
      "codex": "Skill-based via .codex/skills/"
    }
  }
]
```

**Functions:**
- extractCapabilities(sourcePath) - Main extractor
- extractAgentCapabilities() - Parse AGENT_CAPABILITIES from capability-matrix.js
- extractCommandCapabilities() - Parse command registry
- extractStateCapabilities() - Parse state management features
- aggregateByFeature(capabilities) - Group and format data
- writeCapabilityData(outputPath) - Write JSON file

Use require() to load capability-matrix.js dynamically, fs.promises for I/O.
Zero npm dependencies.
  </action>
  <verify>
```bash
node bin/doc-generator/extract-capabilities.js && \
node -e "const data = require('./docs/capability-data.json'); console.log(data.length > 30 && data[0].category ? 'PASS' : 'FAIL')"
```
  </verify>
  <done>extract-capabilities.js generates capability-data.json with all 11 agents, 24 commands, and state features with support levels and notes</done>
</task>

<task type="auto">
  <name>Create interactive matrix HTML and vanilla JS</name>
  <files>docs/capability-matrix.html, docs/assets/matrix.js, docs/assets/matrix.css</files>
  <action>
Create self-contained interactive matrix following research Pattern 3: Interactive Capability Matrix (Vanilla JS).

**capability-matrix.html:**
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GSD Capability Matrix</title>
  <link rel="stylesheet" href="assets/matrix.css">
</head>
<body>
  <header>
    <h1>GSD Multi-CLI Capability Matrix</h1>
    <p>Explore which features work in Claude Code, Copilot CLI, and Codex CLI</p>
  </header>
  
  <main id="matrix-container">
    <!-- Matrix will be rendered here by JavaScript -->
  </main>
  
  <footer>
    <p>Last updated: <span id="last-updated"></span></p>
    <p><a href="cli-comparison.md">CLI Comparison</a> | 
       <a href="implementation-differences.md">Implementation Differences</a> |
       <a href="troubleshooting.md">Troubleshooting</a></p>
  </footer>
  
  <script src="assets/matrix.js"></script>
</body>
</html>
```

**assets/matrix.js:**
```javascript
// Vanilla JavaScript - zero dependencies
class CapabilityMatrix {
  constructor(containerId) {
    this.container = document.getElementById(containerId);
    this.data = [];
    this.filters = { cli: 'all', category: 'all' };
    this.init();
  }
  
  async init() {
    await this.loadData();
    this.render();
  }
  
  async loadData() {
    const response = await fetch('./capability-data.json');
    this.data = await response.json();
  }
  
  render() {
    const html = `
      <div class="matrix-controls">
        <label>Filter by CLI:
          <select id="cli-filter">
            <option value="all">All CLIs</option>
            <option value="claude">Claude Code</option>
            <option value="copilot">Copilot CLI</option>
            <option value="codex">Codex CLI</option>
          </select>
        </label>
        <label>Filter by Category:
          <select id="category-filter">
            <option value="all">All Features</option>
            <option value="agents">Agents</option>
            <option value="commands">Commands</option>
            <option value="state">State Management</option>
          </select>
        </label>
      </div>
      <table class="capability-matrix">
        <thead>
          <tr>
            <th>Feature</th>
            <th>Claude Code</th>
            <th>Copilot CLI</th>
            <th>Codex CLI</th>
          </tr>
        </thead>
        <tbody id="matrix-body"></tbody>
      </table>
    `;
    this.container.innerHTML = html;
    this.renderRows();
    this.attachEvents();
  }
  
  renderRows() {
    const tbody = document.getElementById('matrix-body');
    const filtered = this.filterData();
    
    tbody.innerHTML = filtered.map(row => `
      <tr>
        <td><strong>${row.feature}</strong><br><small>${row.description || ''}</small></td>
        <td class="status-${row.claude}" title="${row.notes.claude || ''}">${this.formatStatus(row.claude)}</td>
        <td class="status-${row.copilot}" title="${row.notes.copilot || ''}">${this.formatStatus(row.copilot)}</td>
        <td class="status-${row.codex}" title="${row.notes.codex || ''}">${this.formatStatus(row.codex)}</td>
      </tr>
    `).join('');
  }
  
  formatStatus(status) {
    const icons = { full: '✓', partial: '⚠', none: '✗' };
    const labels = { full: 'Full', partial: 'Partial', none: 'None' };
    return `<span class="status-icon">${icons[status] || ''}</span> ${labels[status] || status}`;
  }
  
  filterData() {
    return this.data.filter(row => {
      if (this.filters.category !== 'all' && row.category !== this.filters.category) {
        return false;
      }
      if (this.filters.cli !== 'all' && row[this.filters.cli] === 'none') {
        return false;
      }
      return true;
    });
  }
  
  attachEvents() {
    document.getElementById('cli-filter').addEventListener('change', (e) => {
      this.filters.cli = e.target.value;
      this.renderRows();
    });
    
    document.getElementById('category-filter').addEventListener('change', (e) => {
      this.filters.category = e.target.value;
      this.renderRows();
    });
  }
}

// Auto-initialize
document.addEventListener('DOMContentLoaded', () => {
  new CapabilityMatrix('matrix-container');
});
```

**assets/matrix.css:**
```css
/* Clean, modern styling */
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  color: #333;
}

header {
  text-align: center;
  margin-bottom: 40px;
}

h1 {
  color: #2c3e50;
  margin-bottom: 10px;
}

.matrix-controls {
  margin-bottom: 20px;
  display: flex;
  gap: 20px;
}

.matrix-controls label {
  font-weight: 500;
}

.matrix-controls select {
  padding: 8px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.capability-matrix {
  width: 100%;
  border-collapse: collapse;
  background: white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.capability-matrix th {
  background: #34495e;
  color: white;
  padding: 12px;
  text-align: left;
  font-weight: 600;
}

.capability-matrix td {
  padding: 12px;
  border-bottom: 1px solid #ecf0f1;
}

.capability-matrix tr:hover {
  background: #f8f9fa;
}

/* Status colors */
.status-full {
  color: #27ae60;
  font-weight: 500;
}

.status-partial {
  color: #f39c12;
  font-weight: 500;
}

.status-none {
  color: #e74c3c;
  font-weight: 500;
}

.status-icon {
  font-size: 18px;
  margin-right: 4px;
}

footer {
  margin-top: 40px;
  text-align: center;
  color: #7f8c8d;
  font-size: 14px;
}

footer a {
  color: #3498db;
  text-decoration: none;
}

footer a:hover {
  text-decoration: underline;
}
```

Follow research: Zero-dependency interactive HTML with vanilla JS, no frameworks.
  </action>
  <verify>
```bash
# Verify files exist and have correct structure
ls docs/capability-matrix.html docs/assets/matrix.js docs/assets/matrix.css && \
grep -q "class CapabilityMatrix" docs/assets/matrix.js && \
grep -q ".status-full" docs/assets/matrix.css && \
echo "PASS" || echo "FAIL"
```
  </verify>
  <done>capability-matrix.html with embedded vanilla JS enables interactive filtering by CLI and category, shows support levels with icons, includes notes on hover, DOCS-07 requirement satisfied</done>
</task>

</tasks>

<verification>
Test matrix locally:
```bash
# Generate capability data
node bin/doc-generator/extract-capabilities.js

# Open matrix in browser (manual test)
open docs/capability-matrix.html

# Verify JSON structure
node -e "
const data = require('./docs/capability-data.json');
console.log('Features:', data.length);
console.log('Categories:', [...new Set(data.map(d => d.category))]);
console.log('Sample:', data[0]);
"
```

Check HTML/JS/CSS validity:
```bash
# Verify HTML has required elements
grep -q "matrix-container" docs/capability-matrix.html
grep -q "capability-data.json" docs/assets/matrix.js
grep -q ".status-full" docs/assets/matrix.css
```
</verification>

<success_criteria>
- [ ] extract-capabilities.js generates comprehensive capability-data.json
- [ ] capability-data.json includes all 11 agents, 24 commands, and state features
- [ ] capability-matrix.html loads and displays interactive table
- [ ] Users can filter by CLI (Claude/Copilot/Codex/All)
- [ ] Users can filter by category (agents/commands/state/all)
- [ ] Matrix shows support levels with icons (✓ full, ⚠ partial, ✗ none)
- [ ] Hovering over cells shows notes explaining limitations
- [ ] Styling is clean and modern with status colors
- [ ] Zero npm dependencies - pure vanilla JS and CSS
- [ ] Matrix is self-contained HTML file that works locally
- [ ] DOCS-07 requirement satisfied: Interactive capability matrix UI
</success_criteria>

<output>
After completion, create `.planning/phases/06-documentation-verification/06-05-SUMMARY.md`
</output>
