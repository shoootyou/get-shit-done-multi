---
phase: 6
plan: 3
wave: 1
autonomous: true
gap_closure: true
---

# Plan 06-03: Fix Check-Updates UX and Custom-Path Logic

## Context

Phase 6 implemented update detection and versioning, but user testing revealed three UX/logic issues:

1. **--check-updates output not user-friendly**: Uses raw console output instead of logger with banner/formatting
2. **Interactive mode with --custom-path still asks for scope**: If custom directory selected, that IS the scope
3. **--check-updates with --custom-path checks all scopes**: Should only check the custom path, not global/local

## Goal

Fix the three identified issues to make update checking and custom-path handling intuitive and correct.

## Tasks

### Task 1: Improve --check-updates Output Formatting
**Type:** `refactor`

**Changes:**
- Update `bin/lib/cli/check-updates.js` to use logger functions (logger.info, logger.success, logger.error, logger.warn)
- Add banner using logger.banner() for check-updates output
- Make verbose and non-verbose modes both use logger formatting
- Ensure output is friendly and consistent with other CLI output

**Files:**
- `bin/lib/cli/check-updates.js`

### Task 2: Fix Interactive Mode Custom-Path Scope Handling
**Type:** `fix`

**Changes:**
- Update `bin/lib/cli/interactive.js` to treat custom-path as implicit scope
- When --custom-path is provided, skip scope selection prompt
- Set scope automatically based on custom path location (local scope)

**Files:**
- `bin/lib/cli/interactive.js`

### Task 3: Fix --check-updates with --custom-path Validation
**Type:** `fix`

**Changes:**
- Update check-updates logic to respect --custom-path scope limitation
- When --custom-path is provided, only check updates in that specific path
- Skip global and local standard path checks when custom path is set

**Files:**
- `bin/lib/cli/check-updates.js`
- `bin/lib/version/installation-finder.js` (may need to filter by custom path)

## Must-Haves

1. --check-updates uses logger.banner() and logger.xxx functions
2. --check-updates output is friendly in both verbose and non-verbose modes
3. Interactive mode with --custom-path does NOT prompt for scope
4. Interactive mode with --custom-path treats custom dir as the scope
5. --check-updates with --custom-path ONLY checks the custom path
6. --check-updates with --custom-path does NOT check global or local standard paths

## Acceptance Criteria

```bash
# Test 1: Check-updates uses logger formatting
npx . --check-updates
# Should show banner and formatted output with logger

# Test 2: Custom-path in interactive mode skips scope prompt
npx . --custom-path ./test-install
# Should NOT ask for scope, should proceed with custom path

# Test 3: Check-updates with custom-path only checks that path
npx . --check-updates --custom-path ~/.custom-gsd
# Should only report version for ~/.custom-gsd, not global/local
```

## Dependencies

None (fixes existing Phase 6 functionality)

## Notes

- These are bug fixes, not new features
- Focus on UX consistency and correct scope handling
- All changes are in existing Phase 6 files
