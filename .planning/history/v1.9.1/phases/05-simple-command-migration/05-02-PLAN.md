---
phase: 05-simple-command-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - specs/skills/gsd-pause-work/SKILL.md
  - specs/skills/gsd-resume-work/SKILL.md
  - specs/skills/gsd-list-phase-assumptions/SKILL.md
  - .claude/skills/gsd-pause-work.md (generated)
  - .claude/skills/gsd-resume-work.md (generated)
  - .claude/skills/gsd-list-phase-assumptions.md (generated)
autonomous: true
must_haves:
  goal: "Migrate workflow delegation commands that reference external process files"
  truths:
    - Three spec folders exist with workflow file @-references preserved
    - pause-work creates .continue-here.md handoff file correctly
    - resume-work reads handoff file and resumes context
    - list-phase-assumptions references workflow file for assumption analysis
    - All workflow files exist at referenced paths before migration
    - All three commands generate and install successfully
  artifacts:
    - specs/skills/gsd-pause-work/SKILL.md
    - specs/skills/gsd-resume-work/SKILL.md
    - specs/skills/gsd-list-phase-assumptions/SKILL.md
  wiring:
    - pause-work uses Write tool to create handoff file
    - resume-work uses Read tool to load handoff file
    - list-phase-assumptions uses @-reference to workflow file
  key_links:
    - Workflow files in ~/.claude/get-shit-done/workflows/ → @-referenced in SKILL.md
---

# Phase 5 Plan 02: Batch 2 - Status/Utility Commands

**Objective:** Migrate workflow delegation commands (pause-work, resume-work, list-phase-assumptions) that reference external process files

## Context

These commands delegate to external workflow files for detailed process logic, enabling reuse across commands. They're more complex than Batch 1 (file writes, workflow references) but still have no spawning.

**From Research (05-RESEARCH.md):**
- **Pattern 2**: Workflow file delegation via @-references
- **Complexity**: LOW-MEDIUM (40-123 lines)
- **Dependencies**: Workflow files must exist before migration
- **Key risk**: Workflow file @-references breaking if files missing

**Commands in batch:**
1. **gsd-pause-work** (123 lines) - Create handoff file for context transfer
2. **gsd-resume-work** (40 lines) - Load handoff file and resume work
3. **gsd-list-phase-assumptions** (50 lines) - Analyze phase assumptions via workflow

**Why Wave 1:**
- Independent of other Phase 5 commands (can run parallel with Batch 1)
- Workflow files already exist (verified)
- No spawning or complex orchestration

**Pre-migration check:**
```bash
# Verify workflow files exist
ls ~/.claude/get-shit-done/workflows/resume-project.md
ls ~/.claude/get-shit-done/workflows/list-phase-assumptions.md
```

## Tasks

<task name="verify-workflow-files-exist" type="auto">
  <files>~/.claude/get-shit-done/workflows/</files>
  <action>
Before migrating commands, verify all referenced workflow files exist.

```bash
echo "=== Verifying Workflow Files ==="

WORKFLOW_DIR="${HOME}/.claude/get-shit-done/workflows"

# Check resume-work workflow
if [ -f "${WORKFLOW_DIR}/resume-project.md" ]; then
  echo "✓ resume-project.md exists"
else
  echo "✗ resume-project.md MISSING"
  echo "  Location: ${WORKFLOW_DIR}/resume-project.md"
  echo "  Required by: gsd-resume-work"
  exit 1
fi

# Check list-phase-assumptions workflow
if [ -f "${WORKFLOW_DIR}/list-phase-assumptions.md" ]; then
  echo "✓ list-phase-assumptions.md exists"
else
  echo "✗ list-phase-assumptions.md MISSING"
  echo "  Location: ${WORKFLOW_DIR}/list-phase-assumptions.md"
  echo "  Required by: gsd-list-phase-assumptions"
  exit 1
fi

echo
echo "All workflow files verified. Proceeding with migration."
```

If workflow files missing, skip migration and report to user for resolution.
  </action>
  <verify>
```bash
# Both workflow files exist
test -f ~/.claude/get-shit-done/workflows/resume-project.md
test -f ~/.claude/get-shit-done/workflows/list-phase-assumptions.md
```
  </verify>
  <done>
All required workflow files exist at expected paths, ready for @-reference migration
  </done>
</task>

<task name="migrate-pause-work-command" type="auto">
  <files>specs/skills/gsd-pause-work/SKILL.md</files>
  <action>
Create gsd-pause-work spec from legacy commands/gsd/pause-work.md (123 lines).

```bash
mkdir -p specs/skills/gsd-pause-work

cat > specs/skills/gsd-pause-work/SKILL.md << 'SPEC_EOF'
---
name: gsd-pause-work
description: Create handoff file capturing current context for seamless work resumption
skill_version: 1.9.1
requires_version: 1.9.0+
platforms: [claude, copilot, codex]
tools:
  - name: read
    required: true
    reason: Load current STATE.md, ROADMAP.md, recent work context
  - name: write
    required: true
    reason: Create .continue-here.md handoff file with full context
  - name: bash
    required: true
    reason: Gather file counts, git status, session metadata
arguments: []
metadata:
  generated: {{generated}}
  platform: {{platform}}
  version: {{version}}
---
SPEC_EOF
```

Append body from legacy commands/gsd/pause-work.md:
- Preserve handoff file creation logic
- Maintain context gathering (STATE, ROADMAP, recent summaries)
- Keep metadata section (pause time, next steps, blockers)
- Preserve file path: `.continue-here.md` in project root

Process structure:
1. Load project context (STATE.md, ROADMAP.md)
2. Gather session metadata (current phase/plan, git status)
3. Identify pending work (todos, blockers)
4. Write handoff file with sections:
   - Current position
   - Recent work summary
   - Next steps
   - Open questions/blockers
5. Display confirmation message

Reference legacy:
```bash
sed -n '/^---$/,/^---$/!p' commands/gsd/pause-work.md >> specs/skills/gsd-pause-work/SKILL.md
```
  </action>
  <verify>
```bash
# Spec created
test -f specs/skills/gsd-pause-work/SKILL.md

# Contains handoff file logic
grep -q ".continue-here.md" specs/skills/gsd-pause-work/SKILL.md

# Has Write tool declared
grep -q "write" specs/skills/gsd-pause-work/SKILL.md

# Generates successfully
npm run install:claude 2>&1 | grep -q "gsd-pause-work"

# Output created
test -f .claude/skills/gsd-pause-work.md
```
  </verify>
  <done>
gsd-pause-work spec exists, handoff file creation logic preserved, Write tool enabled, generates successfully
  </done>
</task>

<task name="migrate-resume-work-command" type="auto">
  <files>specs/skills/gsd-resume-work/SKILL.md</files>
  <action>
Create gsd-resume-work spec from legacy commands/gsd/resume-work.md (40 lines).

```bash
mkdir -p specs/skills/gsd-resume-work

cat > specs/skills/gsd-resume-work/SKILL.md << 'SPEC_EOF'
---
name: gsd-resume-work
description: Resume work session by loading handoff file and restoring context
skill_version: 1.9.1
requires_version: 1.9.0+
platforms: [claude, copilot, codex]
tools:
  - name: read
    required: true
    reason: Load .continue-here.md handoff file and referenced context files
arguments: []
metadata:
  generated: {{generated}}
  platform: {{platform}}
  version: {{version}}
---
SPEC_EOF
```

Append body from legacy commands/gsd/resume-work.md:
- Preserve @-reference to resume-project workflow
- Maintain handoff file detection (.continue-here.md)
- Keep context restoration logic

Body structure:
```xml
<objective>
Resume work session by loading handoff file and restoring full context.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/resume-project.md
</execution_context>

<process>
1. Check for .continue-here.md in project root
2. If exists:
   - Load handoff file
   - Parse metadata (pause time, position, next steps)
   - Follow resume-project workflow
3. If missing:
   - Load STATE.md and ROADMAP.md directly
   - Present current position
   - Suggest running /gsd:progress
</process>
```

Reference legacy:
```bash
sed -n '/^---$/,/^---$/!p' commands/gsd/resume-work.md >> specs/skills/gsd-resume-work/SKILL.md
```
  </action>
  <verify>
```bash
# Spec created
test -f specs/skills/gsd-resume-work/SKILL.md

# Contains workflow reference
grep -q "resume-project.md" specs/skills/gsd-resume-work/SKILL.md

# Contains handoff file reference
grep -q ".continue-here.md" specs/skills/gsd-resume-work/SKILL.md

# Generates successfully
npm run install:claude 2>&1 | grep -q "gsd-resume-work"

# Output created
test -f .claude/skills/gsd-resume-work.md
```
  </verify>
  <done>
gsd-resume-work spec exists, workflow @-reference preserved, handoff file logic intact, generates successfully
  </done>
</task>

<task name="migrate-list-phase-assumptions-command" type="auto">
  <files>specs/skills/gsd-list-phase-assumptions/SKILL.md</files>
  <action>
Create gsd-list-phase-assumptions spec from legacy commands/gsd/list-phase-assumptions.md (50 lines).

```bash
mkdir -p specs/skills/gsd-list-phase-assumptions

cat > specs/skills/gsd-list-phase-assumptions/SKILL.md << 'SPEC_EOF'
---
name: gsd-list-phase-assumptions
description: Analyze phase and present Claude's assumptions before planning begins
skill_version: 1.9.1
requires_version: 1.9.0+
platforms: [claude, copilot, codex]
tools:
  - name: read
    required: true
    reason: Load ROADMAP.md, phase context, codebase map files
  - name: bash
    required: true
    reason: Phase normalization, directory validation
arguments:
  - name: phase
    type: string
    required: true
    description: Phase number or name to analyze assumptions for
metadata:
  generated: {{generated}}
  platform: {{platform}}
  version: {{version}}
---
SPEC_EOF
```

Append body from legacy commands/gsd/list-phase-assumptions.md:
- Preserve @-reference to list-phase-assumptions workflow
- Maintain assumption analysis structure
- Keep output format (conversational, no file creation)

Body structure:
```xml
<objective>
Analyze a phase and present Claude's assumptions about technical approach, 
implementation order, scope boundaries, risk areas, and dependencies.

Purpose: Help users see what Claude thinks BEFORE planning begins.
Output: Conversational output only (no file creation).
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/list-phase-assumptions.md
</execution_context>

<process>
1. Validate phase number argument
2. Check if phase exists in roadmap
3. Follow list-phase-assumptions.md workflow
4. Present assumptions clearly
5. Prompt "What do you think?"
</process>
```

Reference legacy:
```bash
sed -n '/^---$/,/^---$/!p' commands/gsd/list-phase-assumptions.md >> specs/skills/gsd-list-phase-assumptions/SKILL.md
```
  </action>
  <verify>
```bash
# Spec created
test -f specs/skills/gsd-list-phase-assumptions/SKILL.md

# Contains workflow reference
grep -q "list-phase-assumptions.md" specs/skills/gsd-list-phase-assumptions/SKILL.md

# Has phase argument
grep -q "phase" specs/skills/gsd-list-phase-assumptions/SKILL.md

# Generates successfully
npm run install:claude 2>&1 | grep -q "gsd-list-phase-assumptions"

# Output created
test -f .claude/skills/gsd-list-phase-assumptions.md
```
  </verify>
  <done>
gsd-list-phase-assumptions spec exists, workflow @-reference preserved, argument handling intact, generates successfully
  </done>
</task>

<task name="validate-batch-2-migration" type="auto">
  <files>.claude/skills/gsd-*.md</files>
  <action>
Run comprehensive validation on all three workflow delegation commands.

```bash
echo "=== Batch 2 Validation ==="
echo

# Test 1: All specs exist
echo "1. Checking specs exist..."
for cmd in gsd-pause-work gsd-resume-work gsd-list-phase-assumptions; do
  if [ -f "specs/skills/${cmd}/SKILL.md" ]; then
    echo "  ✓ ${cmd}/SKILL.md exists"
  else
    echo "  ✗ ${cmd}/SKILL.md MISSING"
    exit 1
  fi
done
echo

# Test 2: Workflow references preserved
echo "2. Validating workflow @-references..."
if grep -q "resume-project.md" specs/skills/gsd-resume-work/SKILL.md; then
  echo "  ✓ gsd-resume-work references resume-project workflow"
else
  echo "  ✗ gsd-resume-work missing workflow reference"
fi

if grep -q "list-phase-assumptions.md" specs/skills/gsd-list-phase-assumptions/SKILL.md; then
  echo "  ✓ gsd-list-phase-assumptions references workflow"
else
  echo "  ✗ gsd-list-phase-assumptions missing workflow reference"
fi
echo

# Test 3: Generate all skills
echo "3. Testing generation..."
npm run install:claude 2>&1 | tee /tmp/install-output.txt
if grep -q "gsd-pause-work" /tmp/install-output.txt && grep -q "gsd-resume-work" /tmp/install-output.txt && grep -q "gsd-list-phase-assumptions" /tmp/install-output.txt; then
  echo "  ✓ All skills generated"
else
  echo "  ✗ Generation failed"
  cat /tmp/install-output.txt
  exit 1
fi
echo

# Test 4: All outputs exist
echo "4. Checking generated outputs..."
for cmd in gsd-pause-work gsd-resume-work gsd-list-phase-assumptions; do
  if [ -f ".claude/skills/${cmd}.md" ]; then
    echo "  ✓ ${cmd}.md generated"
  else
    echo "  ✗ ${cmd}.md NOT generated"
    exit 1
  fi
done
echo

# Test 5: Validate tools and patterns
echo "5. Validating tool declarations..."

# pause-work should have Write tool
if grep -q "write" specs/skills/gsd-pause-work/SKILL.md; then
  echo "  ✓ gsd-pause-work has Write tool"
else
  echo "  ✗ gsd-pause-work missing Write tool"
fi

# resume-work should have Read tool
if grep -q "read" specs/skills/gsd-resume-work/SKILL.md; then
  echo "  ✓ gsd-resume-work has Read tool"
else
  echo "  ✗ gsd-resume-work missing Read tool"
fi

# list-phase-assumptions should have phase argument
if grep -q "phase" specs/skills/gsd-list-phase-assumptions/SKILL.md; then
  echo "  ✓ gsd-list-phase-assumptions has phase argument"
else
  echo "  ✗ gsd-list-phase-assumptions missing phase argument"
fi

echo
echo "=== Batch 2 Migration: COMPLETE ==="
echo "Commands migrated: 3/3"
echo "  - gsd-pause-work (handoff file creation)"
echo "  - gsd-resume-work (workflow delegation)"
echo "  - gsd-list-phase-assumptions (workflow delegation)"
```
  </action>
  <verify>
```bash
# All validations passed
test $? -eq 0

# Workflow files still exist
test -f ~/.claude/get-shit-done/workflows/resume-project.md
test -f ~/.claude/get-shit-done/workflows/list-phase-assumptions.md
```
  </verify>
  <done>
All three workflow delegation commands validated: specs exist, @-references preserved, generation successful, tools correct
  </done>
</task>

## Success Criteria

**Observable truths** (user can verify):
1. Three new folders exist in `specs/skills/` (gsd-pause-work, gsd-resume-work, gsd-list-phase-assumptions)
2. Workflow @-references preserved (resume-project.md, list-phase-assumptions.md)
3. pause-work creates .continue-here.md, resume-work reads it
4. All three commands generate and install successfully
5. No workflow file path errors during execution

**Technical verification:**
- Write tool enabled for pause-work (handoff file creation)
- Read tool enabled for resume-work (handoff file loading)
- Workflow @-references use correct paths (~/.claude/get-shit-done/workflows/)
- Generated outputs contain workflow references

**Git commit:**
```bash
git add specs/skills/gsd-{pause-work,resume-work,list-phase-assumptions}/
git commit -m "feat(05): migrate batch 2 status/utility commands

Batch 2: Workflow delegation commands (3 commands)
- gsd-pause-work: Create handoff file
- gsd-resume-work: Resume from handoff (refs workflow)
- gsd-list-phase-assumptions: Analyze assumptions (refs workflow)

Pattern: Workflow file @-references
Complexity: LOW-MEDIUM (40-123 lines)
Wave: 1 (parallel with Batch 1, no dependencies)"
```

## Output

**Commands migrated:** 3/21 (total with Batch 1: 6/21)
**Completion:** ~29% of Phase 5
**Next:** Plan 05-03 (Batch 3: Phase management commands)
