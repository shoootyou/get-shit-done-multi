---
phase: 3
plan: "03-06"
title: "GAP CLOSURE: Fix Skills Installation Directory"
type: gap_closure
autonomous: true
priority: CRITICAL
estimated_duration: 10 min
blocking: true
parent_plan: "03-04"
---

# Plan 03-06: Fix Skills Installation Directory

## Context

**Issue discovered:** User reports not seeing individual skill folders after `--copilot` installation. Only sees legacy `.github/skills/get-shit-done/`.

**Root cause:** Skills are being generated in `.github/copilot/skills/` but GitHub Copilot CLI expects skills in `.github/skills/` directory.

**Evidence:**
```
Generated (wrong):
  .github/copilot/skills/gsd-help/SKILL.md
  .github/copilot/skills/gsd-execute-phase/SKILL.md
  
Expected by Copilot CLI:
  .github/skills/gsd-help/SKILL.md
  .github/skills/gsd-execute-phase/SKILL.md
  
Legacy location:
  .github/skills/get-shit-done/SKILL.md
```

**Blocking:** Cannot use new skills in GitHub Copilot CLI - they're invisible in wrong directory.

## Objective

Fix skills installation path to generate skills directly in `.github/skills/` so they're discoverable by GitHub Copilot CLI.

## Root Cause Analysis

**File:** `bin/install.js` line 904  
**Current code:**
```javascript
const skillDestDir = path.join(dotGithubDir, 'copilot', 'skills');
```

**Problem:** Added extra `copilot` subdirectory that doesn't match GitHub Copilot CLI expectations.

**Why this happened:** Confusion between:
- Copilot **adapter** namespace (internal organization)
- Copilot CLI **expected paths** (`.github/skills/` per GitHub standards)

## Requirements

### Must Have
- Skills generated in `.github/skills/gsd-*/SKILL.md` (not `.github/copilot/skills/`)
- Coexist with legacy skill in `.github/skills/get-shit-done/`
- Skills discoverable by GitHub Copilot CLI
- Agents stay in `.github/agents/` (correct location)

### Should Have
- Update /tmp test to verify correct location
- Document correct path structure
- Clean up old `.github/copilot/` directory if exists

### Nice to Have
- Verification script to check skills are in correct location

## Tasks

### Task 1: Fix skillDestDir Path
**File:** `bin/install.js`  
**Line:** 904

**Change:**
```javascript
// OLD (WRONG)
const skillDestDir = path.join(dotGithubDir, 'copilot', 'skills');

// NEW (CORRECT)
const skillDestDir = path.join(dotGithubDir, 'skills');
```

**Rationale:** GitHub Copilot CLI expects skills in `.github/skills/` not `.github/copilot/skills/`

**Acceptance:**
- Skills generated in `.github/skills/gsd-help/SKILL.md`
- Path matches GitHub Copilot CLI expectations
- Coexists with legacy skill at `.github/skills/get-shit-done/`

### Task 2: Update Documentation Comments
**File:** `bin/lib/adapters/copilot.js`  
**Lines:** 21, 47

**Change:**
```javascript
// OLD
* - Skills in ~/.copilot/skills/get-shit-done/ or .github/skills/get-shit-done/

// NEW
* - Skills in ~/.copilot/skills/ (global) or .github/skills/ (local)
* - Individual skills: .github/skills/gsd-help/, .github/skills/gsd-execute-phase/, etc.
* - Legacy skill: .github/skills/get-shit-done/
```

**Acceptance:**
- Comments accurately reflect current behavior
- Clarify difference between individual skills and legacy skill

### Task 3: Verify Agents Path (No Change Needed)
**File:** `bin/install.js`  
**Lines:** 865-875 (agents installation)

**Verify:** Agents are already installed to `.github/agents/` (correct)

**No changes needed** - agents path is correct.

**Acceptance:**
- Agents remain in `.github/agents/*.agent.md`
- No regression in agents installation

### Task 4: Clean Up Test Directories
**Action:** Remove old test directories with wrong structure

```bash
# Remove old test with wrong structure
rm -rf /tmp/gsd-test-install

# Clean up any .github/copilot/ directories from previous incorrect installs
# (User will need to do this in their workspace)
```

**Acceptance:**
- Fresh test environment
- No confusion from old wrong-structure tests

### Task 5: Integration Test with Correct Structure
**Commands:**
```bash
# Fresh test
rm -rf /tmp/gsd-test-correct
mkdir -p /tmp/gsd-test-correct
cd /tmp/gsd-test-correct && git init --quiet

# Install from workspace
cd /workspace
node bin/install.js --copilot --project-dir /tmp/gsd-test-correct

# Verify CORRECT structure
ls -la /tmp/gsd-test-correct/.github/skills/
echo "Expected: gsd-help, gsd-execute-phase, gsd-new-project, gsd-new-milestone, get-shit-done"

# Verify WRONG structure doesn't exist
ls /tmp/gsd-test-correct/.github/copilot/ 2>&1 | grep "No such file"

# Check skill content
head -20 /tmp/gsd-test-correct/.github/skills/gsd-help/SKILL.md
```

**Acceptance criteria:**
- ✅ `.github/skills/gsd-help/SKILL.md` exists
- ✅ `.github/skills/gsd-execute-phase/SKILL.md` exists
- ✅ `.github/skills/gsd-new-project/SKILL.md` exists
- ✅ `.github/skills/gsd-new-milestone/SKILL.md` exists
- ✅ `.github/skills/get-shit-done/` exists (legacy)
- ✅ `.github/copilot/` does NOT exist
- ✅ `.github/agents/` exists with 13 agents
- ✅ Skills have valid frontmatter and content

### Task 6: Test in Workspace (Show User)
**Commands:**
```bash
# Run install in workspace (user will see these results)
cd /workspace
node bin/install.js --copilot

# Show user the structure
tree -L 3 .github/skills/ 2>/dev/null || ls -la .github/skills/
```

**Acceptance:**
- User can see individual skill folders
- Skills are at same level as legacy get-shit-done folder
- Structure is clear and intuitive

## Success Criteria

1. ✅ Skills generated in `.github/skills/gsd-*/SKILL.md`
2. ✅ `.github/copilot/` directory NOT created
3. ✅ Legacy skill coexists: `.github/skills/get-shit-done/`
4. ✅ Agents in correct location: `.github/agents/*.agent.md`
5. ✅ /tmp test passes with correct structure
6. ✅ User can see skills in GitHub Copilot CLI
7. ✅ Documentation comments updated

## Risks

**Low risk:**
- Single line change (remove `copilot` from path)
- Agents path already correct
- Legacy skill path unchanged

**Potential issues:**
- User may have old `.github/copilot/` directories from previous installs
- Need to document cleanup process

**Mitigations:**
- Clear documentation of correct structure
- Provide cleanup commands for users
- Test thoroughly in /tmp before workspace

## Dependencies

**Blocks:** Checkpoint 03-04 completion  
**Blocked by:** Plan 03-05 (already complete)

## Notes

- This is a critical correction of Plan 03-05
- Plan 03-05 fixed --project-dir but introduced wrong subdirectory
- Skills path should match GitHub conventions: `.github/skills/`
- Copilot adapter is internal naming, not directory structure

## Execution Strategy

**Auto-execute:** Yes (autonomous: true)  
**Estimated time:** 10 minutes  
**Parallel:** No (must complete before continuing checkpoint)

**Steps:**
1. Change skillDestDir path (Task 1)
2. Update documentation (Task 2)
3. Clean test directories (Task 4)
4. Run integration test (Task 5)
5. Show results to user (Task 6)
6. Document in 03-06-SUMMARY.md
7. Resume checkpoint 03-04 verification

## Expected Output

```
.github/
├── agents/
│   ├── gsd-codebase-mapper.agent.md
│   ├── gsd-debugger.agent.md
│   └── ... (13 total)
├── skills/
│   ├── get-shit-done/           # Legacy skill
│   │   └── SKILL.md
│   ├── gsd-help/                # New individual skills
│   │   └── SKILL.md
│   ├── gsd-execute-phase/
│   │   └── SKILL.md
│   ├── gsd-new-project/
│   │   └── SKILL.md
│   └── gsd-new-milestone/
│       └── SKILL.md
├── ISSUE_TEMPLATE/
└── copilot-instructions.md
```

**NOT:**
```
.github/
├── copilot/                     # ❌ Wrong - should not exist
│   └── skills/
│       ├── gsd-help/
│       └── ...
```
