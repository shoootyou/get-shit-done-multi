---
phase: 05-simple-command-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - specs/skills/gsd-help/SKILL.md
  - specs/skills/gsd-verify-installation/SKILL.md
  - specs/skills/gsd-list-milestones/SKILL.md
  - specs/skills/gsd-whats-new/SKILL.md
  - .claude/skills/gsd-help.md (generated)
  - .claude/skills/gsd-verify-installation.md (generated)
  - .claude/skills/gsd-list-milestones.md (generated)
  - .claude/skills/gsd-whats-new.md (generated)
autonomous: true
must_haves:
  goal: "Migrate reference-only commands that display information without side effects"
  truths:
    - Four spec folders exist with SKILL.md files (gsd-help, gsd-verify-installation, gsd-list-milestones, gsd-whats-new)
    - All four commands generate successfully via install.js
    - No file writes or state mutations (reference-only pattern)
    - Workflow file @-references preserved where applicable
    - All four commands install and run without errors
  artifacts:
    - specs/skills/gsd-help/SKILL.md
    - specs/skills/gsd-verify-installation/SKILL.md
    - specs/skills/gsd-list-milestones/SKILL.md
    - specs/skills/gsd-whats-new/SKILL.md
  wiring:
    - help command references workflow file via @-reference
    - verify-installation runs diagnostic checks with Bash tool
    - list-milestones reads MILESTONES.md registry
  key_links:
    - SKILL.md specs → install.js::generateSkillsFromSpecs → .claude/skills/*.md
---

# Phase 5 Plan 01: Batch 1 - Reference Commands

**Objective:** Migrate four reference-only commands (help, verify-installation, list-milestones, whats-new) that display information without modifying state

## Context

These are the simplest Phase 5 commands: no spawning, no file writes, pure information display. They're ideal for Wave 1 parallel execution since they have zero dependencies and validate the basic migration pattern for simple commands.

**From Research (05-RESEARCH.md):**
- **Tier 1 - Reference-only**: Commands that display information without state modification
- **Pattern**: Read files, display output, no writes
- **Complexity**: LOW (50-142 lines each)
- **Dependencies**: None (can migrate in parallel)

**Commands in batch:**
1. **gsd-help** (383 lines) - Display GSD command reference
2. **gsd-verify-installation** (97 lines) - Run diagnostic checks
3. **gsd-list-milestones** (142 lines) - Display milestone registry
4. **gsd-whats-new** (124 lines) - Display changelog and version updates

**Why Wave 1:**
- No dependencies on other Phase 5 commands
- Reference-only pattern (lowest risk)
- Can validate migration tooling with simplest cases

## Tasks

<task name="migrate-help-command" type="auto">
  <files>specs/skills/gsd-help/SKILL.md</files>
  <action>
Create gsd-help spec (already exists as test case from Phase 1, verify it's current).

Check existing spec:
```bash
cat specs/skills/gsd-help/SKILL.md
```

If outdated or missing elements, update to current standards:
```yaml
---
name: gsd-help
description: Display GSD command reference and usage guide
skill_version: 1.9.1
requires_version: 1.9.0+
platforms: [claude, copilot, codex]
tools:
  - name: read
    required: true
    reason: Load help content from documentation files
arguments: []
metadata:
  generated: {{generated}}
  platform: {{platform}}
  version: {{version}}
---
```

Body content from legacy commands/gsd/help.md - preserve display format exactly.

Verify @-reference to help content if workflow file exists.
  </action>
  <verify>
```bash
# Spec exists
test -f specs/skills/gsd-help/SKILL.md

# Generates successfully
npm run install:claude 2>&1 | grep -q "gsd-help"

# Output file created
test -f .claude/skills/gsd-help.md
```
  </verify>
  <done>
gsd-help spec exists, generates successfully, command installs to .claude/skills/
  </done>
</task>

<task name="migrate-verify-installation-command" type="auto">
  <files>specs/skills/gsd-verify-installation/SKILL.md</files>
  <action>
Create gsd-verify-installation spec from legacy commands/gsd/verify-installation.md (97 lines).

```bash
mkdir -p specs/skills/gsd-verify-installation

cat > specs/skills/gsd-verify-installation/SKILL.md << 'SPEC_EOF'
---
name: gsd-verify-installation
description: Run diagnostic checks on GSD installation and report status
skill_version: 1.9.1
requires_version: 1.9.0+
platforms: [claude, copilot, codex]
tools:
  - name: bash
    required: true
    reason: Run diagnostic commands (check directories, versions, permissions)
  - name: read
    required: true
    reason: Load expected file structure documentation
arguments: []
metadata:
  generated: {{generated}}
  platform: {{platform}}
  version: {{version}}
---
SPEC_EOF
```

Then append body content from legacy commands/gsd/verify-installation.md:
- Copy entire body section (after frontmatter delimiter)
- Preserve diagnostic checks exactly:
  - Check .planning/ structure exists
  - Verify bin/install.js present
  - Check specs/ directories
  - Validate agents/ directory
  - Test command discovery
- Preserve output format (checklist with ✓/✗)

Reference legacy:
```bash
sed -n '/^---$/,/^---$/!p' commands/gsd/verify-installation.md >> specs/skills/gsd-verify-installation/SKILL.md
```
  </action>
  <verify>
```bash
# Spec created
test -f specs/skills/gsd-verify-installation/SKILL.md

# Contains diagnostic logic
grep -q "Check .planning/ structure" specs/skills/gsd-verify-installation/SKILL.md

# Generates successfully
npm run install:claude 2>&1 | grep -q "gsd-verify-installation"

# Output created
test -f .claude/skills/gsd-verify-installation.md

# Can run command (exit 0 or 1, not crash)
(.claude/skills/gsd-verify-installation.md; true)
```
  </verify>
  <done>
gsd-verify-installation spec exists, diagnostic checks preserved, generates and runs successfully
  </done>
</task>

<task name="migrate-list-milestones-command" type="auto">
  <files>specs/skills/gsd-list-milestones/SKILL.md</files>
  <action>
Create gsd-list-milestones spec from legacy commands/gsd/list-milestones.md (142 lines).

```bash
mkdir -p specs/skills/gsd-list-milestones

cat > specs/skills/gsd-list-milestones/SKILL.md << 'SPEC_EOF'
---
name: gsd-list-milestones
description: Display milestone registry showing all archived milestones with status
skill_version: 1.9.1
requires_version: 1.9.0+
platforms: [claude, copilot, codex]
tools:
  - name: read
    required: true
    reason: Load MILESTONES.md registry and history files
  - name: bash
    required: true
    reason: Find milestone directories, count requirements files
arguments: []
metadata:
  generated: {{generated}}
  platform: {{platform}}
  version: {{version}}
---
SPEC_EOF
```

Append body from legacy commands/gsd/list-milestones.md:
- Preserve table display format
- Maintain milestone parsing logic (MILESTONES.md structure)
- Keep directory scanning for .planning/history/*
- Preserve requirement counting logic

Process section structure:
1. Check if MILESTONES.md exists
2. Parse registry entries
3. For each milestone:
   - Read archived metadata
   - Count requirements
   - Display status
4. Format as table with columns: Version | Archived | Requirements | Status

Reference legacy:
```bash
sed -n '/^---$/,/^---$/!p' commands/gsd/list-milestones.md >> specs/skills/gsd-list-milestones/SKILL.md
```
  </action>
  <verify>
```bash
# Spec created
test -f specs/skills/gsd-list-milestones/SKILL.md

# Contains parsing logic
grep -q "MILESTONES.md" specs/skills/gsd-list-milestones/SKILL.md

# Generates successfully
npm run install:claude 2>&1 | grep -q "gsd-list-milestones"

# Output created
test -f .claude/skills/gsd-list-milestones.md

# Contains table format logic
grep -q "table" specs/skills/gsd-list-milestones/SKILL.md || grep -q "Version" specs/skills/gsd-list-milestones/SKILL.md
```
  </verify>
  <done>
gsd-list-milestones spec exists, registry parsing preserved, generates successfully, table display format intact
  </done>
</task>

<task name="migrate-whats-new-command" type="auto">
  <files>specs/skills/gsd-whats-new/SKILL.md</files>
  <action>
Create gsd-whats-new spec from legacy commands/gsd/whats-new.md (124 lines).

Follow established pattern from help/verify-installation. Create directory:
```bash
mkdir -p specs/skills/gsd-whats-new
```

Create spec with frontmatter:
```yaml
cat > specs/skills/gsd-whats-new/SKILL.md << 'SPEC_EOF'
---
name: gsd-whats-new
description: See what's new in GSD since your installed version
skill_version: 1.9.1
requires_version: 1.9.0+
platforms: [claude, copilot, codex]
tools:
  - name: read
    required: true
    reason: Read VERSION file and local CHANGELOG.md
  - name: bash
    required: true
    reason: Fetch remote changelog, parse versions
arguments: []
metadata:
  generated: {{generated}}
  platform: {{platform}}
  version: {{version}}
---
SPEC_EOF
```

Append body from legacy commands/gsd/whats-new.md:
- Preserve version comparison logic (installed vs latest)
- Maintain changelog fetching (WebFetch with fallback to local)
- Keep version parsing and diff display
- Preserve "breaking changes" highlighting

Process section structure:
1. Read VERSION file from ~/.claude/get-shit-done/VERSION
2. Fetch remote CHANGELOG.md (or fallback to local)
3. Parse versions and compare
4. Extract changes between installed and latest
5. Display formatted output with update instructions

Reference legacy:
```bash
sed -n '/^---$/,/^---$/!p' commands/gsd/whats-new.md >> specs/skills/gsd-whats-new/SKILL.md
```
  </action>
  <verify>
```bash
# Spec created
test -f specs/skills/gsd-whats-new/SKILL.md

# Contains version logic
grep -q "VERSION" specs/skills/gsd-whats-new/SKILL.md

# Contains changelog fetching
grep -q "CHANGELOG" specs/skills/gsd-whats-new/SKILL.md

# Generates successfully
npm run install:claude 2>&1 | grep -q "gsd-whats-new"

# Output created
test -f .claude/skills/gsd-whats-new.md

# Contains version comparison logic
grep -q "installed.*latest" specs/skills/gsd-whats-new/SKILL.md || grep -q "version" specs/skills/gsd-whats-new/SKILL.md
```
  </verify>
  <done>
gsd-whats-new spec exists, version comparison preserved, changelog fetching intact, generates successfully
  </done>
</task>

<task name="validate-batch-1-migration" type="auto">
  <files>.claude/skills/gsd-*.md</files>
  <action>
Run comprehensive validation on all four migrated commands.

```bash
echo "=== Batch 1 Validation ==="
echo

# Test 1: All specs exist
echo "1. Checking specs exist..."
for cmd in gsd-help gsd-verify-installation gsd-list-milestones gsd-whats-new; do
  if [ -f "specs/skills/${cmd}/SKILL.md" ]; then
    echo "  ✓ ${cmd}/SKILL.md exists"
  else
    echo "  ✗ ${cmd}/SKILL.md MISSING"
    exit 1
  fi
done
echo

# Test 2: Generate all skills
echo "2. Testing generation..."
npm run install:claude 2>&1 | tee /tmp/install-output.txt
if grep -q "4 skills" /tmp/install-output.txt || (grep -q "gsd-help" /tmp/install-output.txt && grep -q "gsd-verify-installation" /tmp/install-output.txt && grep -q "gsd-list-milestones" /tmp/install-output.txt && grep -q "gsd-whats-new" /tmp/install-output.txt); then
  echo "  ✓ All skills generated"
else
  echo "  ✗ Generation failed"
  cat /tmp/install-output.txt
  exit 1
fi
echo

# Test 3: All outputs exist
echo "3. Checking generated outputs..."
for cmd in gsd-help gsd-verify-installation gsd-list-milestones gsd-whats-new; do
  if [ -f ".claude/skills/${cmd}.md" ]; then
    echo "  ✓ ${cmd}.md generated"
  else
    echo "  ✗ ${cmd}.md NOT generated"
    exit 1
  fi
done
echo

# Test 4: Validate content preservation
echo "4. Validating content preservation..."

# help should reference help content
if grep -q "help\|usage\|command" .claude/skills/gsd-help.md; then
  echo "  ✓ gsd-help contains help content"
else
  echo "  ✗ gsd-help missing help content"
fi

# verify-installation should have diagnostic checks
if grep -q ".planning\|diagnostic\|check" .claude/skills/gsd-verify-installation.md; then
  echo "  ✓ gsd-verify-installation contains diagnostics"
else
  echo "  ✗ gsd-verify-installation missing diagnostics"
fi

# list-milestones should reference MILESTONES.md
if grep -q "MILESTONES.md\|milestone\|registry" .claude/skills/gsd-list-milestones.md; then
  echo "  ✓ gsd-list-milestones contains registry logic"
else
  echo "  ✗ gsd-list-milestones missing registry logic"
fi

# whats-new should have version logic
if grep -q "VERSION\|version\|changelog" .claude/skills/gsd-whats-new.md; then
  echo "  ✓ gsd-whats-new contains version logic"
else
  echo "  ✗ gsd-whats-new missing version logic"
fi

echo
echo "=== Batch 1 Migration: COMPLETE ==="
echo "Commands migrated: 4/4"
echo "  - gsd-help"
echo "  - gsd-verify-installation"
echo "  - gsd-list-milestones"
echo "  - gsd-whats-new"
```
  </action>
  <verify>
```bash
# All validations passed
test $? -eq 0

# Commit includes all four specs
git log -1 --stat | grep -q "gsd-help\|gsd-verify-installation\|gsd-list-milestones\|gsd-whats-new"
```
  </verify>
  <done>
All four reference commands validated: specs exist, generation successful, content preserved, outputs created
  </done>
</task>

## Success Criteria

**Observable truths** (user can verify):
1. Four new folders exist in `specs/skills/` (gsd-help, gsd-verify-installation, gsd-list-milestones, gsd-whats-new)
2. Running `npm run install:claude` generates four new .md files in .claude/skills/
3. Each command displays information without modifying files (reference-only pattern)
4. gsd-help displays command reference, gsd-verify-installation runs diagnostics, gsd-list-milestones shows registry, gsd-whats-new shows changelog
5. No errors during generation or installation

**Technical verification:**
- All frontmatter fields valid (name, description, tools, metadata)
- Body content preserved from legacy commands
- Platform conditionals work (if needed for tool declarations)
- Generated outputs match expected format

**Git commit:**
```bash
git add specs/skills/gsd-{help,verify-installation,list-milestones,whats-new}/
git commit -m "feat(05): migrate batch 1 reference commands

Batch 1: Reference-only commands (4 commands)
- gsd-help: Display command reference
- gsd-verify-installation: Run diagnostics
- gsd-list-milestones: Show milestone registry
- gsd-whats-new: Display changelog and version updates

Pattern: Reference-only (no file writes, no spawning)
Complexity: LOW (97-383 lines each)
Wave: 1 (parallel, no dependencies)"
```

## Output

**Commands migrated:** 4/21
**Completion:** ~19% of Phase 5
**Next:** Plan 05-02 (Batch 2: Status/utility commands)
