---
phase: 05-simple-command-migration
plan: 04
type: execute
wave: 2
depends_on: []
files_modified:
  - specs/skills/gsd-add-todo/SKILL.md
  - specs/skills/gsd-check-todos/SKILL.md
  - .claude/skills/gsd-add-todo.md (generated)
  - .claude/skills/gsd-check-todos.md (generated)
autonomous: true
must_haves:
  goal: "Migrate todo management commands with file creation and interactive selection"
  truths:
    - Two spec folders exist with todo file handling logic intact
    - add-todo creates todos in .planning/todos/pending/ with frontmatter
    - check-todos lists todos, allows selection, routes to appropriate action
    - Interactive selection works with AskUserQuestion pattern
    - Todo file parsing preserves gray-matter frontmatter structure
    - Both commands generate and install successfully
  artifacts:
    - specs/skills/gsd-add-todo/SKILL.md
    - specs/skills/gsd-check-todos/SKILL.md
  wiring:
    - add-todo uses Write tool to create todo files
    - check-todos uses Read + Glob tools to find and parse todos
    - check-todos uses task tool to route to other commands
  key_links:
    - add-todo creates → check-todos reads → routes to execution commands
---

# Phase 5 Plan 04: Batch 4 - Todo Management Commands

**Objective:** Migrate todo management commands (add-todo, check-todos) with file creation and interactive selection patterns

## Context

**From Research (05-RESEARCH.md):**
- **Pattern 6**: Interactive selection commands with AskUserQuestion
- **Complexity**: LOW-MEDIUM (182-217 lines)
- **Dependency**: add-todo creates files that check-todos reads

**Commands in batch:**
1. **gsd-add-todo** (182 lines) - Create todo file in .planning/todos/pending/
2. **gsd-check-todos** (217 lines) - List todos, allow selection, route to action

## Tasks

<task name="migrate-add-todo-command" type="auto">
  <files>specs/skills/gsd-add-todo/SKILL.md</files>
  <action>
Create gsd-add-todo spec from legacy commands/gsd/add-todo.md (182 lines).

Frontmatter:
```yaml
name: gsd-add-todo
description: Capture task or idea as todo for later consideration
tools: [write, read, bash]
arguments:
  - name: description
    type: string
    required: true
```

Body preserves:
- Todo file creation in .planning/todos/pending/
- Frontmatter structure (title, area, phase, created, priority)
- Unique filename generation (timestamp or counter)
- Git commit after creation
  </action>
  <verify>Test spec creation, generation, and output existence</verify>
  <done>gsd-add-todo spec exists, todo file creation logic preserved</done>
</task>

<task name="migrate-check-todos-command" type="auto">
  <files>specs/skills/gsd-check-todos/SKILL.md</files>
  <action>
Create gsd-check-todos spec from legacy commands/gsd/check-todos.md (217 lines).

Frontmatter:
```yaml
name: gsd-check-todos
description: List pending todos, allow selection, route to appropriate action
tools: [read, bash, task]
```

Body preserves:
- Glob to find todos: `.planning/todos/pending/*.md`
- Parse frontmatter with gray-matter
- Display table with area, title, created date
- AskUserQuestion for selection
- Route based on user choice:
  - Work on now → route to appropriate command
  - Mark done → move to .planning/todos/done/
  - Delete → remove file
  - Back to list → loop

Critical: Interactive loop structure and routing logic
  </action>
  <verify>Test spec creation, interactive selection, routing</verify>
  <done>gsd-check-todos spec exists, selection + routing logic preserved</done>
</task>

<task name="validate-batch-4-migration" type="auto">
  <files>.claude/skills/gsd-*.md</files>
  <action>
Validate both todo commands:

1. Specs exist
2. Generation successful
3. add-todo has Write tool
4. check-todos has task tool (for routing)
5. Todo file structure preserved (frontmatter format)
6. Interactive selection logic intact

Test cycle: Create todo → Check todos → Select → Verify routing
  </action>
  <verify>All validations pass</verify>
  <done>Both todo commands validated and working</done>
</task>

## Success Criteria

**Git commit:**
```bash
git add specs/skills/gsd-{add,check}-todo/
git commit -m "feat(05): migrate batch 4 todo management commands

Batch 4: Todo management (2 commands)
- gsd-add-todo: Create todo files
- gsd-check-todos: Interactive selection + routing

Pattern: File creation + interactive selection
Wave: 2 (parallel with Batch 3)"
```

## Output

**Commands migrated:** 2/21 (total: 11/21)
**Completion:** ~52% of Phase 5
**Next:** Plan 05-05 (Batch 5: Verification suite)
