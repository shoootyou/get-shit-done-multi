---
phase: 06.2
tested: 2026-01-28
status: diagnosed
severity: major
tests_total: 5
tests_passed: 2
---

# Phase 6.2 UAT Report

**Phase:** 06.2 - Installation Output Verification & Bug Fixes  
**Goal:** Fix critical installation bugs affecting frontmatter transformation and template variable replacement  
**Tested:** 2026-01-28  
**Status:** DIAGNOSED (2/5 tests passed, 3 tests revealed critical bug)

---

## Test Results

### Test 1: Claude Skills Field ✅ PASS

**Steps:**
1. Install GSD to Claude platform (--claude --local)
2. Inspect agent frontmatter for skills field
3. Verify skills list contains /gsd-* references

**Expected:**
Claude agents should include `skills` field with auto-extracted skill references

**Result:** ✅ PASS

**Evidence:**
- gsd-executor: Contains `skills: [gsd-execute-phase]`
- gsd-planner: Contains `skills: [gsd-discuss-phase, gsd-execute-phase, gsd-plan-phase, gsd-research-phase]`
- gsd-debugger: Contains `skills: [gsd-debug]`

All Claude agents correctly include the skills field with appropriate skill references.

---

### Test 2: Copilot Tools Format & Skills Exclusion ❌ FAIL

**Steps:**
1. Install GSD to Copilot platform (--copilot --local)
2. Verify skills field is absent from agent frontmatter
3. Verify tools field format is single-line array

**Expected:**
- Skills field: EXCLUDED (not supported by Copilot)
- Tools format: `tools: ['read', 'edit', 'bash', 'grep']` (single-line array, no quotes around array)

**Result:** ❌ FAIL (skills exclusion works, tools format broken)

**Evidence:**
```yaml
---
name: gsd-executor
description: '...'
tools: 'Read, Edit, Bash, Grep'
---
```

**Issues Found:**
- ✅ Skills field correctly EXCLUDED
- ❌ Tools format is INCORRECT:
  - **Actual:** `tools: 'Read, Edit, Bash, Grep'` (comma-separated string)
  - **Expected:** `tools: ['read', 'edit', 'bash', 'grep']` (single-line array without outer quotes)

---

### Test 3: Codex Tools Format & Skills Exclusion ❌ FAIL

**Steps:**
1. Install GSD to Codex platform (--codex --local)
2. Verify skills field is absent from agent frontmatter
3. Verify tools field format is single-line array

**Expected:**
- Skills field: EXCLUDED (not supported by Codex)
- Tools format: `tools: ['read', 'edit', 'bash', 'grep']` (single-line array)

**Result:** ❌ FAIL (same issue as Test 2)

**Evidence:**
Same incorrect format as Copilot - tools are a comma-separated string instead of array.

**Issues Found:**
- ✅ Skills field correctly EXCLUDED
- ❌ Tools format identical issue to Test 2

---

### Test 4: Template Variable Replacement ✅ PASS

**Steps:**
1. Install GSD to any platform
2. Search for unreplaced template variables in get-shit-done/ directory
3. Verify manifest contains real values

**Expected:**
- No {{VERSION}}, {{PLATFORM_ROOT}}, {{COMMAND_PREFIX}}, {{PLATFORM_NAME}} remain
- Manifest shows actual values (version, platform, etc.)

**Result:** ✅ PASS

**Evidence:**
- No template variables found in any installed files
- Manifest contains: `"gsd_version": "2.0.0", "platform": "copilot"`
- All text files processed correctly

Template variable replacement working perfectly across all file types.

---

### Test 5: Multi-Platform Installation ⚠️ PARTIAL PASS

**Steps:**
1. Install to all three platforms simultaneously (--claude --copilot --codex)
2. Verify each platform gets appropriate frontmatter format

**Expected:**
- Claude: Has skills field, multi-line tools
- Copilot: No skills, single-line tools array
- Codex: No skills, single-line tools array

**Result:** ⚠️ PARTIAL PASS

**Evidence:**
- ✅ Claude has skills field (correct)
- ✅ Copilot excludes skills field (correct)
- ✅ Codex excludes skills field (correct)
- ❌ Copilot tools format wrong (string instead of array)
- ❌ Codex tools format wrong (string instead of array)

Skills field handling works correctly across all platforms during multi-platform installation. Tools format bug persists.

---

## Issues Found

### Issue 1: Custom Frontmatter Serializer Not Applied to Copilot/Codex Agents

**Type:** Bug  
**Severity:** Major  
**Description:** The custom YAML serializer created in Plan 06.2-01 is not being applied when transforming agent frontmatter for Copilot and Codex platforms.

**Current Behavior:**
- Tools field serialized as comma-separated string: `tools: 'Read, Edit, Bash, Grep'`
- This is the gray-matter default behavior

**Expected Behavior:**
- Tools field should be single-line array: `tools: ['read', 'edit', 'bash', 'grep']`
- Should use custom serializer from `bin/lib/rendering/frontmatter-serializer.js`

**Impact:**
- Copilot/Codex may not parse agent frontmatter correctly
- Tools field format doesn't match platform spec
- Affects all 13 agents on both platforms

**Root Cause (Hypothesis):**
CopilotAdapter.transformFrontmatter() and CodexAdapter.transformFrontmatter() are calling `serializeFrontmatter()` but the output format suggests:
1. The serializer might not be handling the tools field correctly
2. OR the tools field value is already a string in the template (not an array)
3. OR there's a tool name mapping step that converts to string format

**Affects:** Tests 2, 3, and 5 (Copilot and Codex installations)

---

## Resolution Status

### Investigation Required

The custom frontmatter serializer was created and tested in Plan 06.2-01 with 22 unit tests. However, actual installation output shows tools are still in string format, not array format.

**Next Steps:**
1. Investigate why serializeFrontmatter() output doesn't match expected array format
2. Check if templates have tools as string vs array
3. Verify adapter transformFrontmatter() is actually using serializeFrontmatter()
4. Check tool name mapping logic - might be converting array to string

**Recommended Action:**
Spawn gsd-debugger to investigate root cause of tools format issue.

---

## Summary

**Tests Passed:** 2/5 (40%)  
**Tests Failed:** 3/5 (60%)  
**Critical Issues:** 1 (Major severity)

**What Works:**
- ✅ Claude agents include skills field correctly
- ✅ Copilot/Codex agents exclude skills field correctly
- ✅ Template variable replacement works perfectly
- ✅ Multi-platform installation completes successfully

**What's Broken:**
- ❌ Copilot agents have wrong tools format (string instead of array)
- ❌ Codex agents have wrong tools format (string instead of array)
- ❌ Custom frontmatter serializer not being applied correctly

**Impact Assessment:**
- **Blocker?** No - installations complete successfully
- **Major?** Yes - Copilot/Codex platforms may not parse frontmatter correctly
- **User-Facing?** Yes - Anyone installing to Copilot or Codex affected

---

## Next Steps

**Recommended:** Route C - Issues found, debugging required

```bash
# Investigate tools format issue
/gsd-debug
```

**Investigation Focus:**
1. Why is serializeFrontmatter() not producing array format?
2. Are templates storing tools as string or array?
3. Is adapter.transformFrontmatter() actually calling the custom serializer?
4. Does tool name mapping convert arrays to strings?

---

**Tester:** User + GSD Verifier  
**Test Environment:** /tmp/gsd-uat-phase-6.2/ (isolated)  
**Installation Target:** v2.0.0
