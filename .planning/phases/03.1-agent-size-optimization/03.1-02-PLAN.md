---
phase: 03.1-agent-size-optimization
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - specs/agents/gsd-debugger-investigator.md
  - specs/agents/gsd-debugger-specialist.md
autonomous: true

must_haves:
  truths:
    - "gsd-debugger split into two functional agents: investigator (orchestration) and specialist (methodology)"
    - "Both new agents are under 30,000 characters"
    - "ALL original content from gsd-debugger is preserved across both agents"
    - "Investigator agent knows when and how to spawn specialist"
    - "Split follows same pattern as gsd-planner split"
  artifacts:
    - path: "specs/agents/gsd-debugger-investigator.md"
      provides: "Primary orchestrator for debugging sessions"
      max_chars: 30000
      contains: ["<role>", "<execution_flow>", "<debug_file_protocol>", "checkpoint", "structured_returns"]
    - path: "specs/agents/gsd-debugger-specialist.md"
      provides: "Methodology specialist for complex debugging scenarios"
      max_chars: 30000
      contains: ["<philosophy>", "<hypothesis_testing>", "<investigation_techniques>", "<verification_patterns>", "<research_vs_reasoning>"]
  key_links:
    - from: "gsd-debugger-investigator"
      to: "gsd-debugger-specialist"
      via: "task tool spawn"
      pattern: "task.*gsd-debugger-specialist.*For complex"
    - from: "specs/agents/gsd-debugger.md"
      to: "specs/agents/gsd-debugger-investigator.md + gsd-debugger-specialist.md"
      via: "functional decomposition"
      pattern: "All sections distributed, no content loss"
---

<objective>
Split gsd-debugger (35,456 chars) into two functional agents using coordinator/specialist pattern, achieving 100% content preservation while staying under Copilot's 30K limit.

**Purpose:** Enable gsd-debugger to work on Copilot platform (currently exceeds 30K limit by 18%) while preserving ALL debugging methodology, investigation techniques, and patterns through functional decomposition.

**Output:** Two new agent specs that together contain everything from the original, following the same coordination pattern as gsd-planner split.
</objective>

<execution_context>
@.github/skills/get-shit-done/get-shit-done/workflows/execute-plan.md
@.github/skills/get-shit-done/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03.1-agent-size-optimization/README.md
@specs/agents/gsd-debugger.md
@docs/AGENT-SPLIT-PATTERN.md
</context>

<tasks>

<task type="auto">
  <name>Split gsd-debugger into Investigator + Specialist</name>
  <files>specs/agents/gsd-debugger-investigator.md, specs/agents/gsd-debugger-specialist.md</files>
  <action>
Perform functional decomposition of gsd-debugger.md into two agents. **CRITICAL: Zero content loss - every example, technique, and pattern must be preserved.**

## gsd-debugger-investigator.md (~19K chars)

**Include (execution-focused):**
1. **Frontmatter** (name: gsd-debugger-investigator, description updates, tools same as original)
2. **Role section** (responsibilities, spawning context) + ADD coordination note:
   - "For complex debugging scenarios requiring deep methodology, spawn gsd-debugger-specialist via task tool"
3. **Debug file protocol section** (COMPLETE - all file formats, sections, update rules)
4. **Execution flow section** (COMPLETE - all steps from check_active_session through resume_from_file)
5. **Checkpoint section** (all checkpoint types - if exists in original)
6. **Structured returns section** (all return formats)
7. **Tools section** (unchanged)

**Add new section before execution_flow:**
```xml
<coordination>

## When to Spawn Specialist

Spawn gsd-debugger-specialist when:
- Novel bug category (no established investigation pattern)
- Complex hypothesis formulation needed (multiple interacting systems)
- Verification pattern selection (which technique fits the bug type?)
- Research vs reasoning decision (should we look at docs or experiment?)
- User requests detailed debugging methodology

Spawn pattern:
\```
task(
  agent_type="gsd-debugger-specialist",
  description="Analyze bug hypothesis",
  prompt="\
Context: Bug in {system}, symptom is {symptom}
Initial hypothesis: {hypothesis}

Analyze: Recommend investigation technique and verification approach.
Include: Potential cognitive biases and research needs."
)
\```

For standard bugs: Use built-in investigation loop (most cases).
For complex bugs: Spawn specialist for methodology, then investigate per their recommendations.

</coordination>
```

**Character target:** 18,000-20,000 chars

## gsd-debugger-specialist.md (~16K chars)

**Include (methodology-focused):**
1. **Frontmatter** (name: gsd-debugger-specialist, description: "Debugging methodology specialist...", tools: [Read, Bash, Grep, Glob])
2. **Role section** - NEW:
```xml
<role>
You are a debugging methodology specialist. You provide deep analysis and investigation strategies for complex debugging scenarios.

**You are spawned by gsd-debugger-investigator when:**
- Novel bug category without established patterns
- Complex hypothesis formulation needed
- Verification technique selection required
- Research vs reasoning decisions
- Detailed methodology requested

**Your job:** Analyze the debugging scenario, recommend investigation techniques, identify potential biases, suggest verification approaches. You do NOT execute debugging - investigator does that using your advice.

**Core capabilities:**
- Hypothesis testing methodology
- Investigation technique selection (7+ techniques)
- Verification pattern matching
- Research vs reasoning analysis
- Cognitive bias identification
- Scientific debugging philosophy
</role>
```

3. **Philosophy section** (COMPLETE - scientific method, failure as information, all principles)
4. **Hypothesis testing section** (COMPLETE - RED-AMBER-GREEN states, all examples, testing rules)
5. **Investigation techniques section** (COMPLETE - all 7+ techniques with full examples):
   - Bisection/binary search
   - Rubber duck debugging
   - Time-travel debugging
   - Minimization
   - Differential debugging
   - Print/log debugging
   - Instrumentation
   - (any others from original)
6. **Verification patterns section** (COMPLETE - all patterns with examples)
7. **Research vs reasoning section** (COMPLETE - decision trees, when to research, when to experiment)
8. **Cognitive biases section** (if exists - confirmation bias, anchoring, etc.)

**Character target:** 15,000-17,000 chars

## Content Verification

After split, verify:
- [ ] investigator + specialist combined char count = original ±500 chars
- [ ] Every section from original exists in one of the two new files
- [ ] All investigation techniques preserved with FULL examples
- [ ] All verification patterns preserved
- [ ] Debug file protocol complete in investigator
- [ ] Execution flow complete in investigator
- [ ] Investigator has spawn logic
- [ ] Both agents have proper frontmatter

**Use EXACT text from original - this is reorganization, not rewriting.**
</action>
  <verify>
# Check character counts
wc -c specs/agents/gsd-debugger-investigator.md specs/agents/gsd-debugger-specialist.md

# Verify both under 30K
test $(wc -c < specs/agents/gsd-debugger-investigator.md) -lt 30000 && echo "✓ Investigator under 30K"
test $(wc -c < specs/agents/gsd-debugger-specialist.md) -lt 30000 && echo "✓ Specialist under 30K"

# Check frontmatter
head -20 specs/agents/gsd-debugger-investigator.md | grep "name: gsd-debugger-investigator"
head -20 specs/agents/gsd-debugger-specialist.md | grep "name: gsd-debugger-specialist"

# Verify key sections exist
grep -q "<coordination>" specs/agents/gsd-debugger-investigator.md && echo "✓ Coordination section"
grep -q "<debug_file_protocol>" specs/agents/gsd-debugger-investigator.md && echo "✓ Debug file protocol"
grep -q "<hypothesis_testing>" specs/agents/gsd-debugger-specialist.md && echo "✓ Hypothesis testing"
grep -q "<investigation_techniques>" specs/agents/gsd-debugger-specialist.md && echo "✓ Investigation techniques"
</verify>
  <done>
Both gsd-debugger agents exist, are under 30K chars each, contain ALL original content (distributed by function), and investigator knows how to spawn specialist
</done>
</task>

</tasks>

<verification>
1. Run character count checks: `wc -c specs/agents/gsd-debugger-*.md`
2. Verify both files under 30,000 characters
3. Check combined character count roughly matches original (35,456 ±500)
4. Verify frontmatter correct in both agents
5. Verify coordination section exists in investigator
6. Verify debug file protocol complete in investigator
7. Spot-check that investigation techniques are FULL examples (not abbreviated)
</verification>

<success_criteria>
1. **gsd-debugger-investigator.md** exists and is 18,000-20,000 characters
2. **gsd-debugger-specialist.md** exists and is 15,000-17,000 characters
3. **Combined content** equals original (~35K chars) - zero information loss
4. **Coordination logic** present in investigator for spawning specialist
5. **All original sections** accounted for in one of the two new agents
6. **All investigation techniques** preserved with full examples (not pseudocode)
7. **Debug file protocol** complete and unchanged in investigator
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-agent-size-optimization/03.1-02-SUMMARY.md`

Include:
- Character counts for both new agents
- Content distribution summary (which sections went where)
- Coordination pattern used (matches gsd-planner pattern)
- Verification that all content preserved
</output>
