---
phase: 06-documentation-polish
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/MIGRATION-V2.md
autonomous: true

must_haves:
  goal: "v1.x users can successfully upgrade to v2.0 understanding breaking changes and benefits"
  
  observable_truths:
    - "v1.x user reads MIGRATION-V2.md and understands what changed"
    - "v1.x user follows upgrade steps and successfully installs v2.0"
    - "v1.x user understands agents are now generated, not static"
    - "v1.x user knows existing .planning/ state is preserved"
    - "v1.x user knows to re-run install to regenerate agents"
  
  required_artifacts:
    - "docs/MIGRATION-V2.md exists documenting v1.x → v2.0 upgrade"
    - "Breaking changes section lists what's different"
    - "Benefits section explains why the change was made"
    - "Upgrade steps provide concrete commands"
    - "FAQ section addresses common questions"
  
  required_wiring:
    - "MIGRATION-V2.md references ARCHITECTURE.md for technical details"
    - "MIGRATION-V2.md references CONTRIBUTING.md for agent customization"
    - "MIGRATION-V2.md references CHANGELOG.md for full change list"
  
  key_links:
    - "Breaking changes → Why it changed (benefits)"
    - "Upgrade steps → Verification commands"
    - "FAQ → ARCHITECTURE.md (deep dive)"
---

# Phase 6 Plan 2: Migration Guide

**Create v1.x → v2.0 migration guide explaining breaking changes and upgrade path**

## Objective

Create MIGRATION-V2.md documenting the upgrade from static agents (v1.x) to template-generated agents (v2.0), enabling smooth migration for existing users.

## Context

**What changed in v2.0:**
- Agents are now generated from specs/agents/ templates during installation
- Platform-specific optimization (Claude vs Copilot get different formats)
- Tool mapping with PRIMARY aliases (Copilot compliance)
- Zero-warnings installation workflow
- 208 tests validating generation, installation, invocation

**What's preserved:**
- Existing .planning/ state and workflow
- Agent functionality (identical behavior)
- Orchestration commands (/gsd:* commands unchanged)
- Installation commands (--copilot, --local, --global flags)

**Goal:**
v1.x user upgrades to v2.0 without losing work or breaking their workflow.

## Tasks

<task name="create-migration-guide" type="auto">
  <files>docs/MIGRATION-V2.md</files>
  <action>
Create docs/MIGRATION-V2.md documenting the v1.x → v2.0 upgrade.

Structure:
1. **What's New in v2.0**
   - Template-based agent generation (single source, no drift)
   - Platform-specific optimization (Claude and Copilot each get best format)
   - Tool mapping with PRIMARY aliases (Copilot spec compliance)
   - Zero-warnings installation
   - Complete test coverage (208 tests, E2E validation)
2. **Breaking Changes**
   - Agents no longer static files in agents/ directory
   - Agents generated from specs/agents/ during installation
   - Tool references in Copilot agents use PRIMARY aliases (execute, edit, search, agent)
   - Custom agent modifications must be done in specs/agents/ not agents/
   - Re-running install overwrites generated agents (idempotent)
3. **Benefits**
   - Single source of truth (specs/agents/ templates)
   - No documentation drift (agents always match specs)
   - Platform optimization (Claude gets string tools, Copilot gets arrays)
   - Size optimization (agent splitting for Copilot 30K limit)
   - Easier maintenance (edit one spec, generate both platforms)
4. **Upgrade Steps**
   ```bash
   # Step 1: Update package
   npm update -g get-shit-done-multi
   
   # Step 2: Verify version
   npm list -g get-shit-done-multi
   # Should show 2.0.0
   
   # Step 3: Regenerate agents (preserves .planning/ state)
   npx get-shit-done-multi  # For Claude
   npx get-shit-done-multi --copilot  # For Copilot
   
   # Step 4: Verify installation
   ls agents/  # Claude agents regenerated
   ls .github/copilot/agents/  # Copilot agents regenerated (if --copilot used)
   
   # Your .planning/ state is PRESERVED - continue where you left off
   ```
5. **What's Preserved**
   - All .planning/ state (ROADMAP.md, STATE.md, phase plans, summaries)
   - Project history and git commits
   - Orchestration workflow (/gsd:* commands)
   - Installation flags (--copilot, --local, --global, --all)
6. **Custom Agents**
   - **v1.x:** Edited agents/my-custom-agent.md directly
   - **v2.0:** Edit specs/agents/my-custom-agent.md, then regenerate
   
   To migrate custom agent:
   ```bash
   # If you have custom agent in agents/my-custom-agent.md
   
   # Step 1: Copy to specs
   cp agents/my-custom-agent.md specs/agents/
   
   # Step 2: Add platform conditionals if needed
   # Edit specs/agents/my-custom-agent.md
   # Use {{#isClaude}}...{{/isClaude}} for Claude-specific content
   # Use {{#isCopilot}}...{{/isCopilot}} for Copilot-specific content
   
   # Step 3: Regenerate
   npx get-shit-done-multi
   ```
7. **FAQ**
   - **Q:** Do I need to recreate my project?
     **A:** No. Your .planning/ state is preserved. Just update and regenerate agents.
   
   - **Q:** Will my in-progress phase work break?
     **A:** No. Agent functionality is identical. Only generation method changed.
   
   - **Q:** Can I still use --copilot flag?
     **A:** Yes. All installation flags work the same, now with platform optimization.
   
   - **Q:** What if I customized agents?
     **A:** Move customizations to specs/agents/ (see Custom Agents section above).
   
   - **Q:** How do I know which agents changed?
     **A:** See CHANGELOG.md for detailed list. Functionality is identical, format optimized.
   
   - **Q:** Why template-based generation?
     **A:** See ARCHITECTURE.md for technical rationale. TL;DR: Single source, no drift, platform optimization.
   
   - **Q:** Do tests still pass?
     **A:** Yes. v2.0 has 208 tests validating generation, installation, and invocation.

Include concrete examples and commands throughout.
Reference ARCHITECTURE.md for deep technical details.
Reference CONTRIBUTING.md for customizing agents.
Reference CHANGELOG.md for complete change list.
  </action>
  <verify>
    <command>test -f docs/MIGRATION-V2.md && grep -q "Breaking Changes" docs/MIGRATION-V2.md && grep -q "Upgrade Steps" docs/MIGRATION-V2.md</command>
    <expected>MIGRATION-V2.md exists with required sections</expected>
  </verify>
  <done>MIGRATION-V2.md created documenting v1.x → v2.0 upgrade path with breaking changes and benefits</done>
</task>

## Verification

**Format validation:**
```bash
# File exists
test -f docs/MIGRATION-V2.md && echo "✓ Migration guide created"

# Has required sections
grep -q "What's New in v2.0" docs/MIGRATION-V2.md && echo "✓ Has What's New"
grep -q "Breaking Changes" docs/MIGRATION-V2.md && echo "✓ Has Breaking Changes"
grep -q "Benefits" docs/MIGRATION-V2.md && echo "✓ Has Benefits"
grep -q "Upgrade Steps" docs/MIGRATION-V2.md && echo "✓ Has Upgrade Steps"
grep -q "FAQ" docs/MIGRATION-V2.md && echo "✓ Has FAQ"
```

**Content validation (manual):**
- [ ] Breaking changes clearly listed
- [ ] Upgrade steps are concrete and testable
- [ ] Benefits explain WHY the change
- [ ] Custom agent migration explained
- [ ] FAQ addresses common concerns

## Success Criteria

1. ✅ docs/MIGRATION-V2.md exists
2. ✅ Breaking changes section lists what's different in v2.0
3. ✅ Benefits section explains advantages of template system
4. ✅ Upgrade steps provide concrete commands
5. ✅ Custom agent migration explained (specs/agents/ vs agents/)
6. ✅ FAQ addresses common upgrade questions
7. ✅ .planning/ state preservation clearly documented

## Output

- `docs/MIGRATION-V2.md` - v1.x → v2.0 upgrade guide
