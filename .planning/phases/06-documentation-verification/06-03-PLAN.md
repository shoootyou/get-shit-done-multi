---
phase: 06-documentation-verification
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - lib-ghcc/cli-recommender.js
  - bin/install.js
autonomous: true

must_haves:
  truths:
    - "Installer shows CLI recommendations based on user's system and needs"
    - "Recommendations explain which CLI works best for different scenarios"
    - "User sees installation status for each CLI (installed/not installed)"
  artifacts:
    - path: "lib-ghcc/cli-recommender.js"
      provides: "CLI selection recommendation logic"
      min_lines: 80
      exports: ["getRecommendations", "analyzeSystem"]
    - path: "bin/install.js"
      provides: "Installer with integrated recommendations"
      contains: "getRecommendations"
  key_links:
    - from: "bin/install.js"
      to: "lib-ghcc/cli-recommender.js"
      via: "require() and call getRecommendations()"
      pattern: "require.*cli-recommender"
    - from: "lib-ghcc/cli-recommender.js"
      to: "lib-ghcc/detect.js"
      via: "detectInstalledCLIs() to check current state"
      pattern: "detectInstalledCLIs"
---

<objective>
Add intelligent CLI selection recommendations to installer, helping users choose the best CLI for their needs based on system state and use case.

Purpose: Reduce installation friction and help users make informed CLI choices. Satisfies INSTALL-09 requirement and Phase 6 success criteria #2.
Output: Enhanced installer that provides CLI recommendations with explanations before installation.
</objective>

<execution_context>
@.github/skills/get-shit-done/get-shit-done/workflows/execute-plan.md
@.github/skills/get-shit-done/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-documentation-verification/06-RESEARCH.md

# Existing installer and detection logic
@bin/install.js
@lib-ghcc/detect.js
</context>

<tasks>

<task type="auto">
  <name>Create CLI recommendation engine</name>
  <files>lib-ghcc/cli-recommender.js</files>
  <action>
Create intelligent CLI recommendation logic based on system state and use cases.

Export getRecommendations(options) function:

**Inputs:**
- options.currentCLIs: Array of installed CLIs from detectInstalledCLIs()
- options.platform: os.platform() result
- options.useCase: 'general' | 'team' | 'personal' (optional)

**Recommendation logic:**

1. **Already Installed Check:**
   - If Claude Code installed: "✓ Claude Code detected - great choice for fast iteration"
   - If Copilot CLI installed: "✓ Copilot CLI detected - excellent for GitHub integration"
   - If Codex CLI installed: "✓ Codex CLI detected - good for OpenAI ecosystem"

2. **Not Yet Installed - Recommendations:**
   - **Claude Code:** "Recommended for solo developers - fastest startup, native agent support"
   - **Copilot CLI:** "Recommended for teams - GitHub integration, collaborative workflows"
   - **Codex CLI:** "Recommended for OpenAI users - integrates with existing OpenAI workflows"

3. **Multi-CLI Recommendation:**
   - If 0 CLIs installed: "Install Claude Code first (easiest setup), add others later"
   - If 1 CLI installed: "You can add other CLIs for flexibility - run with --all flag"
   - If 2+ CLIs installed: "✓ Multi-CLI setup detected - you can switch between CLIs seamlessly"

4. **Platform-Specific Notes:**
   - Windows: "Note: Paths differ on Windows - installer handles this automatically"
   - Mac: "Note: Using ~/Library/Application Support/Claude for Claude Code"
   - Linux: "Note: XDG Base Directory support for config paths"

**Output format:**
```javascript
{
  installed: [{ cli: 'claude', status: 'installed', message: '...' }],
  available: [{ cli: 'copilot', status: 'not-installed', message: '...' }],
  recommendation: 'Install Claude Code first, then add Copilot CLI for team workflows',
  platformNotes: ['Windows path handling enabled']
}
```

Use os.platform(), lib-ghcc/detect.js, zero npm dependencies.
  </action>
  <verify>
```bash
node -e "const { getRecommendations } = require('./lib-ghcc/cli-recommender'); const rec = getRecommendations({ currentCLIs: [], platform: 'darwin' }); console.log(rec.recommendation ? 'PASS' : 'FAIL')"
```
  </verify>
  <done>getRecommendations() returns structured recommendations based on installed CLIs, platform, and use case with clear explanations</done>
</task>

<task type="auto">
  <name>Integrate recommendations into installer</name>
  <files>bin/install.js</files>
  <action>
Modify installer to show CLI recommendations before installation selection.

**Integration points:**

1. **After CLI detection, before user selection:**
```javascript
const { getRecommendations } = require('../lib-ghcc/cli-recommender');

// Detect installed CLIs
const currentCLIs = detectInstalledCLIs();

// Get recommendations
const recommendations = getRecommendations({
  currentCLIs,
  platform: os.platform()
});

// Display recommendations
console.log('\n' + cyan + 'CLI Status:' + reset);
for (const cli of recommendations.installed) {
  console.log(green + '  ✓ ' + reset + cli.message);
}
for (const cli of recommendations.available) {
  console.log(dim + '  ○ ' + reset + cli.message);
}

console.log('\n' + cyan + 'Recommendation:' + reset);
console.log('  ' + recommendations.recommendation);

if (recommendations.platformNotes.length > 0) {
  console.log('\n' + dim + 'Note: ' + recommendations.platformNotes.join(', ') + reset);
}
```

2. **Add --help flag showing recommendations:**
- Document recommendation logic in help text
- Explain what each CLI is best for

3. **Preserve existing functionality:**
- Keep --claude, --copilot, --codex, --all flags
- Keep global vs local installation logic
- Don't change installation behavior, only add recommendations display

Use existing color constants (cyan, green, dim, reset), zero new dependencies.
  </action>
  <verify>
```bash
# Test installer shows recommendations (dry run)
node bin/install.js --help | grep -q "Recommendation" && echo "PASS" || echo "FAIL"
```
  </verify>
  <done>Installer displays CLI status, recommendations, and platform notes before user selection, preserves all existing functionality, INSTALL-09 requirement satisfied</done>
</task>

</tasks>

<verification>
Run installer and verify recommendations appear:
```bash
# Dry run to see recommendations
node bin/install.js --help

# Check recommendation logic works for different scenarios
node -e "
const { getRecommendations } = require('./lib-ghcc/cli-recommender');

// Test: No CLIs installed
const rec1 = getRecommendations({ currentCLIs: [], platform: 'darwin' });
console.log('No CLIs:', rec1.recommendation);

// Test: One CLI installed
const rec2 = getRecommendations({ currentCLIs: ['claude'], platform: 'darwin' });
console.log('Claude installed:', rec2.recommendation);

// Test: Multiple CLIs installed
const rec3 = getRecommendations({ currentCLIs: ['claude', 'copilot'], platform: 'darwin' });
console.log('Multi-CLI:', rec3.recommendation);
"
```
</verification>

<success_criteria>
- [ ] getRecommendations() analyzes installed CLIs and returns recommendations
- [ ] Recommendations explain which CLI works best for different scenarios
- [ ] Platform-specific notes included (Windows/Mac/Linux path differences)
- [ ] Installer displays CLI status (installed/not installed) for each CLI
- [ ] Installer shows recommendation before user makes selection
- [ ] Recommendation logic handles 0, 1, or 2+ CLIs installed scenarios
- [ ] Multi-CLI setup benefits explained clearly
- [ ] All existing installer flags and behavior preserved
- [ ] Zero npm dependencies maintained
- [ ] INSTALL-09 requirement satisfied: Installer provides intelligent CLI selection recommendations
</success_criteria>

<output>
After completion, create `.planning/phases/06-documentation-verification/06-03-SUMMARY.md`
</output>
