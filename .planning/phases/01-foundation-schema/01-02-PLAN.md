---
phase: 01-foundation-schema
plan: 02
type: execute
wave: 2
depends_on:
  - 01-01
files_modified:
  - /specs/skills/gsd-help/SKILL.md
  - commands/gsd/help.md (read-only reference)
autonomous: false
must_haves:
  truths:
    - Test skill gsd-help exists at /specs/skills/gsd-help/SKILL.md following canonical schema
    - SKILL.md has valid YAML frontmatter with name, description, and platform-conditional tools
    - Folder name matches skill name (gsd-help/ for name: gsd-help)
    - Spec replicates legacy help.md functionality without breaking changes
    - Human verification confirms spec content matches legacy command capabilities
  artifacts:
    - /specs/skills/gsd-help/SKILL.md (test skill spec)
    - /specs/skills/gsd-help/ directory (folder structure proof)
  wiring:
    - None yet (Phase 2 will wire to template generator)
  key_links:
    - This test spec proves architecture before bulk migration in Phase 3-5
---

# Plan 02: Test Migration (gsd-help)

**Objective:** Migrate one test skill (gsd-help) to prove folder-per-skill structure and canonical schema work correctly.

## Context

This plan validates the architecture defined in Plan 01 by migrating the simplest command (`gsd:help`) to the new spec format. gsd-help is LOW complexity (no orchestration, no Task tool spawns), making it ideal for testing schema compliance without complex dependencies.

**Why gsd-help:**
- Simple command (shows available commands and usage)
- No subagent spawning (no orchestration complexity)
- Read-only tools (Bash for listing, Read for documentation)
- Clear success criteria (matches legacy help output)

**From RESEARCH.md:**
- Agent spec pattern works for 13 agents with 208 tests
- Same gray-matter parsing, Mustache conditionals, tool mapping
- Folder structure: `/specs/skills/gsd-help/SKILL.md`

**Checkpoint rationale:** First skill migration needs human verification to ensure:
1. Schema interpretation is correct
2. Content faithfully replicates legacy functionality
3. No breaking changes introduced during migration
4. Examples and tool declarations are accurate

## Tasks

<task name="create-gsd-help-folder" type="auto">
  <files>
    /specs/skills/gsd-help/
  </files>
  <action>
Create folder structure for gsd-help skill:

```bash
mkdir -p /workspace/specs/skills/gsd-help
```

Verify folder name matches skill name convention (hyphen, not colon):
```bash
ls -la /workspace/specs/skills/ | grep gsd-help
```

Folder is ready for SKILL.md file.
  </action>
  <verify>
```bash
test -d /workspace/specs/skills/gsd-help && echo "✓ Folder exists" || echo "✗ Folder missing"
```
  </verify>
  <done>Folder `/specs/skills/gsd-help/` created following folder-per-skill structure</done>
</task>

<task name="migrate-help-to-spec" type="auto">
  <files>
    /specs/skills/gsd-help/SKILL.md
    commands/gsd/help.md (read-only)
  </files>
  <action>
Read legacy command for reference:
```bash
cat /workspace/commands/gsd/help.md
```

Create `/specs/skills/gsd-help/SKILL.md` following canonical schema from README.md:

**Frontmatter structure:**
```yaml
---
name: gsd-help
description: "Show available GSD commands with descriptions and usage patterns"

{{#isClaude}}
tools: [Read, Bash, Glob]
{{/isClaude}}
{{#isCopilot}}
tools: [read, bash, glob]
{{/isCopilot}}
{{#isCodex}}
tools: [read, bash, glob]
{{/isCodex}}
---
```

**Body content:**
- Preserve entire prompt body from legacy help.md
- Keep @-references intact (workflows, templates, references)
- Maintain <objective>, <execution_context>, <process> structure
- Preserve all examples and command listings
- Keep tool usage patterns (Bash commands, Read paths, Glob patterns)

**Critical differences from legacy:**
1. Name: `gsd-help` (hyphen) not `gsd:help` (colon)
2. Tools: Platform-conditional blocks (not flat array)
3. File location: `/specs/skills/gsd-help/SKILL.md` (not `commands/gsd/help.md`)
4. File name: `SKILL.md` (all caps, not `help.md`)

**Preserve completely:**
- Description (exact wording for help text consistency)
- Tool permissions (Read, Bash, Glob needed for listing commands)
- Body content (command listing logic, examples, usage patterns)
- @-references to workflows and documentation

**Feature parity checklist:**
- [ ] Description length ≥ original
- [ ] Tool count ≥ original (3 tools minimum)
- [ ] Examples preserved (command invocation examples)
- [ ] Command listing logic intact
- [ ] @-references working (workflows, references)
  </action>
  <verify>
SKILL.md exists and has valid structure:
```bash
# Check file exists
test -f /workspace/specs/skills/gsd-help/SKILL.md && echo "✓ File exists" || echo "✗ File missing"

# Check frontmatter delimiters (should find 2 "---" lines)
grep -c "^---$" /workspace/specs/skills/gsd-help/SKILL.md

# Check required frontmatter fields
grep "^name: gsd-help" /workspace/specs/skills/gsd-help/SKILL.md
grep "^description:" /workspace/specs/skills/gsd-help/SKILL.md
grep "{{#isClaude}}" /workspace/specs/skills/gsd-help/SKILL.md

# Check body content preserved (should have <objective> section)
grep "<objective>" /workspace/specs/skills/gsd-help/SKILL.md
```
  </verify>
  <done>SKILL.md created with valid frontmatter following canonical schema and complete body content from legacy help.md</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
First skill spec (gsd-help) migrated from legacy format to new folder-per-skill structure with canonical schema. This proves the architecture before bulk migration of remaining 28 commands.
  </what-built>
  <how-to-verify>
**1. Review schema compliance:**

```bash
# View the complete SKILL.md file
cat /workspace/specs/skills/gsd-help/SKILL.md
```

Check:
- [ ] Frontmatter has `---` delimiters at start and end
- [ ] `name: gsd-help` (hyphen, not colon)
- [ ] `description:` present and matches legacy help command purpose
- [ ] Platform conditionals present: `{{#isClaude}}`, `{{#isCopilot}}`, `{{#isCodex}}`
- [ ] Tools declared in conditional blocks (not flat array)
- [ ] Body content preserved from legacy help.md

**2. Compare with legacy:**

```bash
# View legacy command
cat /workspace/commands/gsd/help.md

# Side-by-side comparison
diff -u /workspace/commands/gsd/help.md /workspace/specs/skills/gsd-help/SKILL.md
```

Verify:
- [ ] Description equivalent (may be rephrased but same meaning)
- [ ] Tool count ≥ original (3 tools: Read, Bash, Glob)
- [ ] Body structure preserved (<objective>, <execution_context>, <process>)
- [ ] Examples intact (command invocation examples)
- [ ] @-references working (paths may change but references preserved)

**3. Check folder structure:**

```bash
# Verify folder name matches skill name
ls -la /workspace/specs/skills/gsd-help/
```

Confirm:
- [ ] Folder named `gsd-help/` (matches `name: gsd-help`)
- [ ] File named `SKILL.md` (all caps)
- [ ] No extra files in folder

**4. Validate against README schema:**

```bash
# Check canonical schema documentation
grep -A 20 "Canonical Frontmatter Schema" /workspace/specs/skills/README.md
```

Cross-reference:
- [ ] SKILL.md follows documented schema (required fields present)
- [ ] Platform conditionals match README examples
- [ ] Naming convention matches (gsd- prefix, hyphen separator)

**What to look for:**
- ✓ **Good:** Exact replication of functionality, schema compliant, no content loss
- ⚠️ **Warning:** Minor wording changes (document in commit), tool additions (explain rationale)
- ✗ **Blocker:** Missing tools, removed examples, broken @-references, schema violations

**If issues found:**
Describe specific problems (e.g., "Missing Glob tool declaration", "Description too short", "Frontmatter invalid YAML").

**If approved:**
Type "approved" to continue to Phase 2 template integration.
  </how-to-verify>
  <resume-signal>Type "approved" if spec is correct, or describe issues for revision</resume-signal>
</task>

## Verification Criteria

After checkpoint approval:

1. **Folder structure**: `gsd-help/` folder exists in `/specs/skills/`
2. **File naming**: `SKILL.md` file (all caps) in folder
3. **Schema compliance**: Valid YAML frontmatter with required fields
4. **Name format**: `gsd-help` (hyphen, not colon)
5. **Platform conditionals**: Tools declared in {{#isClaude}} blocks
6. **Content preservation**: Body matches legacy help.md functionality
7. **Feature parity**: Description, tools, examples all present
8. **No breaking changes**: All capabilities from legacy command preserved

## Success Criteria

**Observable truths:**
1. Test skill gsd-help successfully migrated to folder structure
2. SKILL.md follows canonical schema documented in README.md
3. Spec replicates legacy help command without functionality loss
4. Folder-per-skill structure proven with one working example
5. Human verification confirms architecture works as intended

**Ready for:** Phase 2 can extend install.js to generate from specs, proven working example exists for testing.

## Output

**Created:**
- `/specs/skills/gsd-help/SKILL.md` (~100-200 lines)
- `/specs/skills/gsd-help/` folder (proves folder-per-skill structure)

**Validated:**
- Canonical schema works for real command migration
- Platform conditional syntax integrates with existing content
- Folder structure scales (ready for 28 more skills)
- Feature parity maintained (no breaking changes)

**Blocked until:** Human verifies first migration is correct (checkpoint gate)
