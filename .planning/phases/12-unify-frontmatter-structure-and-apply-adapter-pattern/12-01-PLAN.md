---
phase: 12-unify-frontmatter-structure-and-apply-adapter-pattern
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - bin/lib/serialization/
  - bin/lib/platforms/claude-adapter.js
  - bin/lib/platforms/copilot-adapter.js
  - bin/lib/platforms/codex-adapter.js
  - bin/lib/installer/install-shared.js
  - bin/lib/installer/install-platform-instructions.js
  - bin/lib/installer/install-agents.js
  - bin/lib/installer/install-skills.js
  - bin/lib/installer/orchestrator.js
  - tests/unit/frontmatter-serializer.test.js
  - tests/unit/template-renderer.test.js
autonomous: true

must_haves:
  truths:
    - "Module directory name reflects its purpose (serialization not rendering)"
    - "All imports reference serialization/ path (no rendering/ references remain)"
    - "Code runs without import errors after rename"
  artifacts:
    - path: "bin/lib/serialization/"
      provides: "Renamed module directory"
      was: "bin/lib/rendering/"
    - path: "bin/lib/serialization/frontmatter-serializer.js"
      provides: "Serializer in correct module"
      min_lines: 100
    - path: "bin/lib/serialization/frontmatter-cleaner.js"
      provides: "Cleaner in correct module"
      min_lines: 30
    - path: "bin/lib/serialization/template-renderer.js"
      provides: "Renderer temporarily in serialization"
      min_lines: 20
  key_links:
    - from: "bin/lib/platforms/*-adapter.js"
      to: "../serialization/"
      via: "import statements"
      pattern: "from ['\"]../serialization/"
    - from: "bin/lib/installer/*.js"
      to: "../serialization/"
      via: "import statements"
      pattern: "from ['\"]../serialization/"
---

<objective>
Rename bin/lib/rendering/ module to bin/lib/serialization/ and update all import statements across the codebase

**Purpose:** Align module naming with purpose (rendering suggests UI, but this module handles YAML serialization)

**Output:** Module directory renamed, all import paths updated, no broken imports
</objective>

<execution_context>
@.github/get-shit-done/workflows/execute-plan.md
@.github/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-unify-frontmatter-structure-and-apply-adapter-pattern/12-01-CONTEXT.md
@.planning/phases/12-unify-frontmatter-structure-and-apply-adapter-pattern/12-RESEARCH.md

# Phase 11 established per-platform pattern for validators
@.planning/phases/11-skill-validation-and-adapter-system/11-01-SUMMARY.md
@.planning/phases/11-skill-validation-and-adapter-system/11-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename rendering/ to serialization/ and update all imports</name>
  <files>
    bin/lib/serialization/
    bin/lib/platforms/claude-adapter.js
    bin/lib/platforms/copilot-adapter.js
    bin/lib/platforms/codex-adapter.js
    bin/lib/installer/install-shared.js
    bin/lib/installer/install-platform-instructions.js
    bin/lib/installer/install-agents.js
    bin/lib/installer/install-skills.js
    bin/lib/installer/orchestrator.js
    bin/lib/serialization/frontmatter-cleaner.js
    tests/unit/frontmatter-serializer.test.js
    tests/unit/template-renderer.test.js
  </files>
  <action>
Rename the module directory using git to preserve history:
```bash
git mv bin/lib/rendering bin/lib/serialization
```

Find all files with imports from rendering/:
```bash
grep -r "from.*rendering" bin/ tests/ --include="*.js" -l
```

Update import statements in all affected files:
- **Platform adapters** (3 files): Change `from '../rendering/frontmatter-serializer.js'` â†’ `from '../serialization/frontmatter-serializer.js'`
- **Installer modules** (5 files): Update path references to serialization/
- **Internal imports** (1 file): frontmatter-cleaner.js imports frontmatter-serializer.js (same directory, no change needed)
- **Test files** (2 files): Update import paths to ../serialization/

Verify no old paths remain:
```bash
grep -r "from.*rendering" bin/ tests/ --include="*.js"
# Expected: No results (exit code 1)
```

Syntax check all modified JavaScript files:
```bash
find bin/ tests/ -name "*.js" -exec node --check {} \; 2>&1 | grep -v "Syntax OK"
# Expected: No output (all files pass syntax check)
```

**Why this approach:**
- `git mv` preserves file history (important for code archeology)
- Systematic grep/replace prevents missed imports
- Syntax validation catches import errors before running tests
- This is Wave 1 of 3-wave migration strategy (structure change only, no logic changes)

**What NOT to do:**
- Don't modify file contents beyond import paths
- Don't run full test suite yet (Wave 4 task)
- Don't split files into per-platform versions yet (Wave 2 task)
  </action>
  <verify>
```bash
# 1. Directory renamed
ls -la bin/lib/serialization/

# 2. Old directory gone
ls bin/lib/rendering/ 2>&1 | grep "No such file"

# 3. No rendering/ imports remain
! grep -r "from.*rendering" bin/ tests/ --include="*.js"

# 4. Syntax check passes
find bin/ tests/ -name "*.js" -exec node --check {} \; 2>&1 | grep -E "(error|Error)" && exit 1 || exit 0
```
  </verify>
  <done>
- Module directory renamed from rendering/ to serialization/
- All 11+ import statements updated to reference serialization/
- No references to old rendering/ path remain in codebase
- All JavaScript files pass syntax validation
- Git history preserved via git mv
  </done>
</task>

</tasks>

<verification>
After task completion:

1. **Directory structure:**
   - `bin/lib/serialization/` exists
   - `bin/lib/rendering/` does not exist

2. **Import paths:**
   - All imports reference `../serialization/` or `./serialization/`
   - Zero references to `rendering/` in bin/ or tests/

3. **File integrity:**
   - All 3 files present: frontmatter-serializer.js, frontmatter-cleaner.js, template-renderer.js
   - No changes to file contents (only location and imports)

4. **Syntax validity:**
   - All JavaScript files pass `node --check` validation
   - No import resolution errors
</verification>

<success_criteria>
Wave 1 migration complete when:
- [ ] Module renamed using git mv
- [ ] All import statements updated (11+ files)
- [ ] Zero references to old rendering/ path
- [ ] All files pass syntax validation
- [ ] Git shows clean mv history (not delete + create)
- [ ] Ready for Wave 2 (per-platform split)
</success_criteria>

<output>
After completion, create `.planning/phases/12-unify-frontmatter-structure-and-apply-adapter-pattern/12-01-SUMMARY.md`

Include:
- Files renamed and imports updated count
- Syntax validation results
- Any import patterns discovered
- Readiness for Wave 2 (per-platform split)
</output>
