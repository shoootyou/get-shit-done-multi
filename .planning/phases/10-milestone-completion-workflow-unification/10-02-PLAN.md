---
phase: 10-milestone-completion-workflow-unification
plan: 02
type: execute
wave: 2
depends_on: [10-01]
files_modified:
  - templates/skills/gsd-archive-milestone/SKILL.md
  - templates/skills/gsd-restore-milestone/SKILL.md
  - templates/skills/gsd-list-milestones/SKILL.md
autonomous: true

must_haves:
  truths:
    - "gsd-archive-milestone shows deprecation message and exits immediately"
    - "gsd-restore-milestone shows deprecation message and exits immediately"
    - "gsd-list-milestones displays from MILESTONES.md registry (not scanning history/)"
    - "Deprecation messages use GSD branded banner format"
    - "Deprecated commands do not execute any operations"
  artifacts:
    - path: "templates/skills/gsd-archive-milestone/SKILL.md"
      provides: "Deprecation blocking message"
      min_lines: 30
    - path: "templates/skills/gsd-restore-milestone/SKILL.md"
      provides: "Deprecation blocking message"
      min_lines: 30
    - path: "templates/skills/gsd-list-milestones/SKILL.md"
      provides: "Milestone listing from registry"
      min_lines: 50
  key_links:
    - from: "templates/skills/gsd-archive-milestone/SKILL.md"
      to: "ui-brand.md"
      via: "deprecation banner pattern"
      pattern: "GSD ► DEPRECATED"
    - from: "templates/skills/gsd-list-milestones/SKILL.md"
      to: ".planning/MILESTONES.md"
      via: "reads milestone registry"
      pattern: "cat.*MILESTONES\\.md"
---

<objective>
Deprecate archive-milestone and restore-milestone commands with blocking messages, and update list-milestones to read from MILESTONES.md registry.

Purpose: Prevent usage of deprecated multi-step workflow and provide clear migration path to unified complete-milestone command.
Output: Updated SKILL.md files with deprecation blocking (archive/restore) and registry-based listing (list-milestones).
</objective>

<execution_context>
@.github/get-shit-done/workflows/execute-plan.md
@.github/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-milestone-completion-workflow-unification/10-01-CONTEXT.md
@.planning/phases/10-milestone-completion-workflow-unification/10-RESEARCH.md
@.planning/phases/10-milestone-completion-workflow-unification/10-01-SUMMARY.md

Current commands to deprecate:
@templates/skills/gsd-archive-milestone/SKILL.md
@templates/skills/gsd-restore-milestone/SKILL.md

Current list command to update:
@templates/skills/gsd-list-milestones/SKILL.md

UI brand patterns:
@templates/get-shit-done/references/ui-brand.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Deprecate archive-milestone with blocking message</name>
  <files>templates/skills/gsd-archive-milestone/SKILL.md</files>
  <action>
Replace entire gsd-archive-milestone SKILL.md content with deprecation blocking message (AI-first approach).

**New content:**

```markdown
---
name: gsd-archive-milestone
description: **DEPRECATED** — Use gsd-complete-milestone instead. This command has been unified into the completion workflow. Shows deprecation notice and exits.
allowed-tools: Read
---

# Archive Milestone (DEPRECATED)

**This command has been replaced by gsd-complete-milestone.**

<objective>
DEPRECATED: This command has been unified into gsd-complete-milestone.
</objective>

<process>

<step name="show_deprecation_and_exit">
Display deprecation notice using GSD branded banner format:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 GSD ► DEPRECATED
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

This command has been unified into the milestone completion workflow.

**Old workflow (deprecated):**
1. {{COMMAND_PREFIX}}complete-milestone    # Mark complete
2. {{COMMAND_PREFIX}}archive-milestone     # Move to milestones/ ← YOU ARE HERE
3. {{COMMAND_PREFIX}}restore-milestone     # Retrieve from milestones/

**New workflow (unified):**
{{COMMAND_PREFIX}}complete-milestone       # Archives directly to history/v{X.Y}/

All milestone files now move directly to `.planning/history/v{X.Y}/`
with mirrored directory structure during completion. Archives are
permanent and git-tracked.

───────────────────────────────────────────────────────────────

## Why This Changed

The old multi-step workflow created confusion about when files were
truly archived. The new unified workflow moves everything to permanent
history/ storage in a single atomic operation.

**To review archived milestones:**
{{COMMAND_PREFIX}}list-milestones

**To start new milestone:**
{{COMMAND_PREFIX}}new-milestone

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

Exit immediately without executing any operations.
</step>

</process>

<success_criteria>
- [ ] Deprecation message displayed with branded banner
- [ ] Clear explanation of old vs new workflow
- [ ] User directed to correct command (complete-milestone)
- [ ] No file operations executed
- [ ] Template variables ({{COMMAND_PREFIX}}) used for cross-platform support
</success_criteria>
```

**AI-first principles:**
- Natural language instructions (no scripts)
- Template variables for cross-platform support
- Clear migration path explained
- Blocking behavior (exit immediately)
- Branded UI consistent with other GSD commands
  </action>
  <verify>
```bash
# Check SKILL.md marked deprecated in description
grep -q "DEPRECATED" templates/skills/gsd-archive-milestone/SKILL.md

# Check deprecation banner present
grep -q "GSD ► DEPRECATED" templates/skills/gsd-archive-milestone/SKILL.md

# Check explains new workflow
grep -q "complete-milestone" templates/skills/gsd-archive-milestone/SKILL.md

# Check exits without operations
grep -q "Exit immediately" templates/skills/gsd-archive-milestone/SKILL.md

# Check uses template variables
grep -q "{{COMMAND_PREFIX}}" templates/skills/gsd-archive-milestone/SKILL.md
```
  </verify>
  <done>
archive-milestone SKILL.md replaced with:
- DEPRECATED marker in frontmatter description
- Branded deprecation banner (GSD ► DEPRECATED)
- Clear explanation of old vs new workflow
- Exit instruction (no operations executed)
- Template variables for cross-platform support
  </done>
</task>

<task type="auto">
  <name>Task 2: Deprecate restore-milestone with blocking message</name>
  <files>templates/skills/gsd-restore-milestone/SKILL.md</files>
  <action>
Replace entire gsd-restore-milestone SKILL.md content with deprecation blocking message (AI-first approach).

**New content:**

```markdown
---
name: gsd-restore-milestone
description: **DEPRECATED** — Archives are now permanent in history/. This command is no longer needed. Shows deprecation notice and exits.
allowed-tools: Read
---

# Restore Milestone (DEPRECATED)

**This command is no longer needed.**

<objective>
DEPRECATED: Archives are now permanent in history/. No restore operation needed.
</objective>

<process>

<step name="show_deprecation_and_exit">
Display deprecation notice using GSD branded banner format:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 GSD ► DEPRECATED
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

This command is no longer needed.

**Old workflow (deprecated):**
1. {{COMMAND_PREFIX}}complete-milestone    # Mark complete
2. {{COMMAND_PREFIX}}archive-milestone     # Move to milestones/
3. {{COMMAND_PREFIX}}restore-milestone     # Retrieve from milestones/ ← YOU ARE HERE

**New approach:**
Archives in `.planning/history/v{X.Y}/` are permanent and git-tracked.
There is no need to restore — simply reference files directly or use
git to view historical versions.

───────────────────────────────────────────────────────────────

## Accessing Archived Milestones

**View milestone history:**
```bash
ls .planning/history/
```

**Read archived files:**
```bash
cat .planning/history/v1.0/ROADMAP.md
```

**View at specific git tag:**
```bash
git show v1.0:ROADMAP.md
```

**List all milestones:**
{{COMMAND_PREFIX}}list-milestones

───────────────────────────────────────────────────────────────

## Why No Restore?

The new workflow archives to permanent history/ with mirrored directory
structure. Files are git-tracked and always accessible. Restoring would
conflict with the current active milestone.

If you need to reference old planning artifacts, use bash commands to
read them directly from history/ or use git commands to view historical
commits.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

Exit immediately without executing any operations.
</step>

</process>

<success_criteria>
- [ ] Deprecation message displayed with branded banner
- [ ] Explains why restore is no longer needed
- [ ] Shows alternative approaches (ls, cat, git show)
- [ ] No file operations executed
- [ ] Template variables ({{COMMAND_PREFIX}}) used for cross-platform support
</success_criteria>
```

**AI-first principles:**
- Natural language instructions showing bash alternatives
- Template variables for cross-platform support
- Educational explanation of new paradigm
- Blocking behavior (exit immediately)
- Practical examples of how to access archived files
  </action>
  <verify>
```bash
# Check SKILL.md marked deprecated in description
grep -q "DEPRECATED" templates/skills/gsd-restore-milestone/SKILL.md

# Check deprecation banner present
grep -q "GSD ► DEPRECATED" templates/skills/gsd-restore-milestone/SKILL.md

# Check shows alternatives (bash commands)
grep -q "cat .planning/history" templates/skills/gsd-restore-milestone/SKILL.md

# Check exits without operations
grep -q "Exit immediately" templates/skills/gsd-restore-milestone/SKILL.md

# Check uses template variables
grep -q "{{COMMAND_PREFIX}}" templates/skills/gsd-restore-milestone/SKILL.md
```
  </verify>
  <done>
restore-milestone SKILL.md replaced with:
- DEPRECATED marker in frontmatter description
- Branded deprecation banner (GSD ► DEPRECATED)
- Explanation of permanent history/ archives
- Bash examples for accessing archived files (ls, cat, git show)
- Exit instruction (no operations executed)
- Template variables for cross-platform support
  </done>
</task>

<task type="auto">
  <name>Task 3: Update list-milestones to read from registry</name>
  <files>templates/skills/gsd-list-milestones/SKILL.md</files>
  <action>
Update gsd-list-milestones SKILL.md to read from MILESTONES.md registry instead of scanning directory (AI-first approach).

**Key changes:**

1. **Update objective** to reflect registry-based listing

2. **Simplify process** to read from MILESTONES.md:
   ```markdown
   <objective>
   Display completed milestones from the MILESTONES.md registry.
   
   Purpose: Show milestone history without scanning filesystem.
   Output: Formatted list of completed milestones with key accomplishments.
   </objective>
   
   <execution_context>
   @{{PLATFORM_ROOT}}/get-shit-done/references/ui-brand.md
   </execution_context>
   
   <context>
   Registry file:
   - `.planning/MILESTONES.md` — Milestone completion registry
   </context>
   
   <process>
   
   <step name="check_registry_exists">
   Check if milestone registry exists using bash:
   
   ```bash
   if [ ! -f .planning/MILESTONES.md ]; then
       echo ""
       echo "No milestones completed yet."
       echo ""
       echo "Complete your first milestone with:"
       echo "  {{COMMAND_PREFIX}}complete-milestone"
       echo ""
       exit 0
   fi
   ```
   
   If registry doesn't exist: Show friendly message and exit.
   If registry exists: Continue to display step.
   </step>
   
   <step name="display_milestones">
   Display milestone history from registry:
   
   ```bash
   echo ""
   echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
   echo " GSD ► MILESTONE HISTORY"
   echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
   echo ""
   
   # Display registry content
   cat .planning/MILESTONES.md
   
   echo ""
   echo "───────────────────────────────────────────────────────────────"
   echo ""
   echo "Archived milestones are in: .planning/history/"
   echo ""
   echo "To view archived files:"
   echo "  ls .planning/history/v1.0/"
   echo "  cat .planning/history/v1.0/ROADMAP.md"
   echo ""
   echo "To start new milestone:"
   echo "  {{COMMAND_PREFIX}}new-milestone"
   echo ""
   echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
   ```
   </step>
   
   </process>
   
   <success_criteria>
   - [ ] Registry existence checked before display
   - [ ] Friendly message if no milestones completed yet
   - [ ] MILESTONES.md content displayed directly (no parsing)
   - [ ] Helpful bash commands shown for accessing archives
   - [ ] User knows next command (complete-milestone or new-milestone)
   - [ ] No references to restore-milestone command
   - [ ] Template variables ({{COMMAND_PREFIX}}) used for cross-platform support
   </success_criteria>
   ```

3. **Remove any restore-milestone references** from the skill

4. **Add helpful examples** for accessing archived files using bash

5. **Keep it simple**: Just cat the registry file (no complex parsing needed)

**AI-first principles:**
- Natural language bash instructions
- Simple file read (cat) instead of complex parsing
- Helpful examples for user self-service
- Template variables for cross-platform support
- Branded banner consistent with other GSD commands
  </action>
  <verify>
```bash
# Check reads from MILESTONES.md
grep -q "MILESTONES.md" templates/skills/gsd-list-milestones/SKILL.md

# Check uses cat command (simple display)
grep -q "cat .planning/MILESTONES.md" templates/skills/gsd-list-milestones/SKILL.md

# Check shows helpful bash examples
grep -q "ls .planning/history" templates/skills/gsd-list-milestones/SKILL.md

# Check no restore-milestone references
! grep -q "restore-milestone" templates/skills/gsd-list-milestones/SKILL.md

# Check uses template variables
grep -q "{{COMMAND_PREFIX}}" templates/skills/gsd-list-milestones/SKILL.md

# Check has branded banner
grep -q "GSD ► MILESTONE HISTORY" templates/skills/gsd-list-milestones/SKILL.md
```
  </verify>
  <done>
list-milestones SKILL.md updated with:
- Registry-based listing (reads MILESTONES.md)
- Simple cat command (no complex parsing)
- Helpful bash examples for accessing archives
- No restore-milestone references
- Branded banner (GSD ► MILESTONE HISTORY)
- Template variables for cross-platform support
  </done>
</task>

</tasks>

<verification>
- archive-milestone shows blocking deprecation message with branded banner
- restore-milestone shows blocking deprecation message with alternatives
- list-milestones reads from MILESTONES.md registry (not scanning filesystem)
- All deprecation messages explain migration path to unified workflow
- No deprecated commands execute any file operations
- All skills use template variables ({{COMMAND_PREFIX}}, {{PLATFORM_ROOT}})
- Bash examples shown inline for user self-service
- No references to deprecated commands in updated skills
</verification>

<success_criteria>
- [ ] archive-milestone deprecated with blocking message and clear migration path
- [ ] restore-milestone deprecated with explanation and bash alternatives
- [ ] list-milestones reads from registry (MILESTONES.md)
- [ ] All deprecation messages use GSD branded banner format
- [ ] Deprecated commands exit immediately without operations
- [ ] No references to deprecated commands in updated skills
- [ ] Template variables used consistently for cross-platform support
- [ ] AI-first approach maintained (natural language instructions, no scripts)
</success_criteria>

<output>
After completion, create `.planning/phases/10-milestone-completion-workflow-unification/10-02-SUMMARY.md`
</output>
