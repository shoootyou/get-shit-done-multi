---
phase: 10-milestone-completion-workflow-unification
plan: 02
type: execute
wave: 2
depends_on: [10-01]
files_modified:
  - templates/skills/gsd-archive-milestone/SKILL.md
  - templates/skills/gsd-restore-milestone/SKILL.md
  - templates/get-shit-done/workflows/archive-milestone.md
  - templates/get-shit-done/workflows/restore-milestone.md
autonomous: true

must_haves:
  truths:
    - "gsd-archive-milestone shows blocking deprecation message and exits"
    - "gsd-restore-milestone shows blocking deprecation message and exits"
    - "Deprecated workflow files removed from templates/get-shit-done/workflows/"
    - "Deprecation messages use GSD branded banner style"
    - "Users understand new unified workflow (complete-milestone archives directly)"
  artifacts:
    - path: "templates/skills/gsd-archive-milestone/SKILL.md"
      provides: "Blocking deprecation notice"
      contains: "DEPRECATED"
    - path: "templates/skills/gsd-restore-milestone/SKILL.md"
      provides: "Blocking deprecation notice"
      contains: "DEPRECATED"
  key_links:
    - from: "templates/skills/gsd-archive-milestone/SKILL.md"
      to: "templates/skills/gsd-complete-milestone/SKILL.md"
      via: "deprecation message references replacement command"
      pattern: "complete-milestone"
---

<objective>
Deprecate gsd-archive-milestone and gsd-restore-milestone commands with blocking messages, and remove deprecated workflow files.

Purpose: Prevent users from using outdated multi-step workflow, guide them to unified complete-milestone command.
Output: Updated SKILL.md files showing deprecation notices, deleted workflow files.
</objective>

<execution_context>
@.github/get-shit-done/workflows/execute-plan.md
@.github/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-milestone-completion-workflow-unification/10-01-CONTEXT.md
@.planning/phases/10-milestone-completion-workflow-unification/10-RESEARCH.md
@.planning/phases/10-milestone-completion-workflow-unification/10-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Deprecate gsd-archive-milestone</name>
  <files>templates/skills/gsd-archive-milestone/SKILL.md</files>
  <action>
Replace gsd-archive-milestone SKILL.md content with blocking deprecation notice:

**Structure:**
1. Update frontmatter:
   - Keep name, description
   - Set description to "DEPRECATED: Use gsd-complete-milestone instead"
   - Keep allowed-tools minimal (just Read)
2. Replace <objective> with deprecation statement
3. Replace entire <process> with single step showing deprecation message
4. Use GSD branded banner format (per RESEARCH.md Pattern 5)

**Deprecation message content:**
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 GSD ► DEPRECATED
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

This command has been replaced by {{COMMAND_PREFIX}}complete-milestone.

**Old workflow (deprecated):**
1. {{COMMAND_PREFIX}}complete-milestone    # Mark complete
2. {{COMMAND_PREFIX}}archive-milestone     # Move to milestones/
3. {{COMMAND_PREFIX}}restore-milestone     # Retrieve from milestones/

**New workflow:**
{{COMMAND_PREFIX}}complete-milestone       # Archives directly to history/v{X.Y}/

All milestone files now move directly to history/ with mirrored
.planning/ structure. Archives are permanent and git-tracked.

To review archived milestones: {{COMMAND_PREFIX}}list-milestones

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**Exit immediately after showing message** (do not execute any archival logic).

**Pattern to follow:**
- GSD branded banner (━━━ lines, 63 chars wide)
- Clear old vs new workflow comparison
- Reference to replacement command
- Exit without processing (per RESEARCH.md Pattern 5)

**What to avoid:**
- Allowing execution "with warning"
- Vague deprecation notices
- Missing guidance on replacement command
  </action>
  <verify>
```bash
# Check SKILL.md has DEPRECATED in objective
grep -q "DEPRECATED" templates/skills/gsd-archive-milestone/SKILL.md

# Check branded banner present
grep -q "GSD ► DEPRECATED" templates/skills/gsd-archive-milestone/SKILL.md

# Check references complete-milestone
grep -q "complete-milestone" templates/skills/gsd-archive-milestone/SKILL.md

# Check has exit instruction
grep -q -i "exit" templates/skills/gsd-archive-milestone/SKILL.md
```
  </verify>
  <done>
gsd-archive-milestone shows blocking deprecation message with GSD banner, explains old vs new workflow, references complete-milestone, and exits immediately.
  </done>
</task>

<task type="auto">
  <name>Task 2: Deprecate gsd-restore-milestone</name>
  <files>templates/skills/gsd-restore-milestone/SKILL.md</files>
  <action>
Replace gsd-restore-milestone SKILL.md content with blocking deprecation notice:

**Structure:**
1. Update frontmatter:
   - Keep name, description
   - Set description to "DEPRECATED: Archives are permanent in history/"
   - Keep allowed-tools minimal (just Read)
2. Replace <objective> with deprecation statement
3. Replace entire <process> with single step showing deprecation message
4. Use GSD branded banner format (per RESEARCH.md Pattern 5)

**Deprecation message content:**
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 GSD ► DEPRECATED
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Archives in history/ are permanent and do not need restoration.

**Old workflow (no longer needed):**
{{COMMAND_PREFIX}}restore-milestone v1.0  # Copy from milestones/ to .planning/

**New approach:**
Archives in .planning/history/ are git-tracked and permanent.
Reference them directly or view with standard tools:

# List archived milestones
{{COMMAND_PREFIX}}list-milestones

# View archived files
ls .planning/history/v1.0/
cat .planning/history/v1.0/ROADMAP.md

# Compare archived vs current
git diff .planning/history/v1.0/PROJECT.md .planning/PROJECT.md

No restoration needed — files remain accessible in place.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**Exit immediately after showing message** (do not execute any restore logic).

**Pattern to follow:**
- GSD branded banner (━━━ lines, 63 chars wide)
- Explain permanent archive concept
- Show direct file access alternatives
- Exit without processing (per RESEARCH.md Pattern 5)

**What to avoid:**
- Suggesting restore is coming back
- Complex workarounds
- Missing guidance on accessing history/
  </action>
  <verify>
```bash
# Check SKILL.md has DEPRECATED in objective
grep -q "DEPRECATED" templates/skills/gsd-restore-milestone/SKILL.md

# Check branded banner present
grep -q "GSD ► DEPRECATED" templates/skills/gsd-restore-milestone/SKILL.md

# Check mentions history/ as permanent
grep -q "history/" templates/skills/gsd-restore-milestone/SKILL.md

# Check has exit instruction
grep -q -i "exit" templates/skills/gsd-restore-milestone/SKILL.md
```
  </verify>
  <done>
gsd-restore-milestone shows blocking deprecation message with GSD banner, explains permanent archives, shows direct access alternatives, and exits immediately.
  </done>
</task>

<task type="auto">
  <name>Task 3: Remove deprecated workflow files</name>
  <files>
    templates/get-shit-done/workflows/archive-milestone.md
    templates/get-shit-done/workflows/restore-milestone.md
  </files>
  <action>
Remove deprecated workflow files that are no longer needed:

**Files to delete:**
1. `templates/get-shit-done/workflows/archive-milestone.md` - Functionality moved to complete-milestone.md
2. `templates/get-shit-done/workflows/restore-milestone.md` - No longer needed (archives are permanent)

**Why delete workflow files but keep SKILL files:**
- SKILL files: Keep to show deprecation message when user tries command
- Workflow files: Delete because they're only referenced by SKILL (no standalone use)

**Git operations:**
```bash
git rm templates/get-shit-done/workflows/archive-milestone.md
git rm templates/get-shit-done/workflows/restore-milestone.md
```

**What to verify:**
- No other files reference these workflows (grep codebase)
- SKILL files don't try to load these workflows (should only show deprecation)

**What to avoid:**
- Deleting SKILL files (users need deprecation message)
- Leaving workflow files that aren't referenced
- Breaking other commands that might reference these
  </action>
  <verify>
```bash
# Check workflow files deleted
! test -f templates/get-shit-done/workflows/archive-milestone.md
! test -f templates/get-shit-done/workflows/restore-milestone.md

# Check SKILL files still exist
test -f templates/skills/gsd-archive-milestone/SKILL.md
test -f templates/skills/gsd-restore-milestone/SKILL.md

# Check no other files reference deleted workflows
! grep -r "archive-milestone.md" templates/ --exclude-dir=.git
! grep -r "restore-milestone.md" templates/ --exclude-dir=.git
```
  </verify>
  <done>
Deprecated workflow files deleted, SKILL files remain for deprecation notices, no broken references in codebase.
  </done>
</task>

</tasks>

<verification>
After completion:
1. Read updated SKILL files to confirm deprecation messages
2. Verify workflow files deleted
3. Test that no files reference deleted workflows
4. Check deprecation messages follow GSD banner style
</verification>

<success_criteria>
- gsd-archive-milestone shows blocking deprecation with GSD banner
- gsd-restore-milestone shows blocking deprecation with GSD banner
- Both SKILL files exit immediately without processing
- Deprecated workflow files deleted from templates/get-shit-done/workflows/
- No broken references to deleted workflow files
- Users have clear guidance on replacement workflow
</success_criteria>

<output>
After completion, create `.planning/phases/10-milestone-completion-workflow-unification/10-02-SUMMARY.md`
</output>
